
// ==UserScript==
// @name           ExLinks
// @namespace      hupotronic
// @author         Hupo
// @version        2.1.1
// @description    Makes e-hentai/exhentai links more useful.
// @include        http://boards.4chan.org/*
// @include        https://boards.4chan.org/*
// @include        http://archive.foolz.us/*
// @include        https://archive.foolz.us/*
// @updateURL      https://github.com/Hupotronic/ExLinks/raw/stable/ExLinks.user.js
// @downloadURL    https://github.com/Hupotronic/ExLinks/raw/stable/ExLinks.user.js
// @run-at         document-start
// ==/UserScript==
ï»¿
(function() {
	"use strict";
	var fetch, options, conf, tempconf, pageconf, regex, img, d, t, $, $$,
		Debug, UI, Cache, API, Database, Hash, SHA1, Sauce, Filter, Parser, Options, Config, Main;
	
	img = {"options":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADLSURBVDhPY2CAgvT0dAUgdiACK8D0gOm0tLQeIP4P1EgQg9SB1IM1gmyECUBtRzUZ1WUgtTCLFECaHaC2YtWE4kQky0D6UDQDDXGEugLkNBAuIUoz1O8wzcrompD5UJcibMamGWQzEP8AYj4gPgLEXVB1oIDFqRnkZGUgZgHiR0C8F4hfALEQMZrhzgZqSIb6vxzmdGKdLQS18RLU+dhthsY3emh3QZ3NAaUnwNIFRlThC2HkZIzsbPJTGHLaRksgsISCjYakbUpyFQCv+BgrcF6dawAAAABJRU5ErkJggg==","ratings":{"0":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAYAAACfOxrCAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADRSURBVEhL7ZfRDYMwDESZhAEYoqMwCqMwCqN0lJYciiVj2XH44xCWokTh/dzZccgw5DEVZKkD61awsbn6Qsxl/OvAuhVsbGrAWIhNGYA19rxgY1PxAHRGsypgY8MsQoic+a/KvhiAPfmuZwYW2qIKPgz5OIJF+FNmaAwD7qwXTPiRsdDWrAA4Y5tZlHk0RLipm+Td2VS8lIbX0Kw4uRLZ2K7un1WBvg7Z2NeAHgdsWSPj9qxHR+DubI/+0w+QdE57Q3gGMLBdBkSPGm+fjT0ZsAMrU9VEHy0wuwAAAABJRU5ErkJggg==","1":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAMAAACo5erwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACHUExURQAAAAAAAAAAAAAAAC0fAgAAAC8gAgAAADIiAgAAADYlAwAAAAAAADwpA0MuAwAAAAAAAEcxBH9SD4FTD4dZEopcE5FjFZNlFppqGJ9vGqZ1Had3Ha18H7SCIrmHI8WRKMyYKs+bK9KMG9ijL9qaKeGkM+KmNeOoN+euPemwP+23RvC7SvfGVaYkwEEAAAAQdFJOUwAeKj5GXl9+hJ63vt7e+P7XXqtKAAAAt0lEQVQoz6WT2xKCMAxEKVCQhmLwLt5vCOL/f5+WtrRvxHGfznRntjvJJAiMEpmGBsOUjk7igtwgRzoOissbAuuRAZLRK3Cubew3n4zmdyFleWoR81QpVz4FuW0xqfaH46vDnxXZBsWubrt3/zZ19ihmzE2wanQDiMDa4+jNUWyfTatHw61PQH+Jm0etQxkM+aPoB6zu638CxOK6LGFoCET0AmbzImaZ8TNGRKdEysTciD4UGip9ADJzH3U5Ln9YAAAAAElFTkSuQmCC","2":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAMAAACo5erwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAC9UExURQAAAAAAAAAAAAAAAC0fAgAAAC8gAiEWAQAAADIiAhUOAQAAADYlAwAAADIjAgAAADwpA0MuAwAAAAAAAAwIABkRAUEtA0cxBH9SD4FTD4RWEIdZEolbEopcE49gFJFjFZNkFpNlFpdnF5pqGJprGJ9vGqFxG6Z1Had3Ha18H7SCIrmHI7+NJsWRKMyYKs+IF8+bK9KMG9iWJdijL9qaKdubKt6fLuGkM+KmNeOoN+euPemwP+23RvC7SvfGVf/oz90AAAATdFJOUwAeKj5GXl9gfoSVnre+xd7e+P5G+mmrAAAA8ElEQVQoz52TWXOCMBSFjYJiSTQ02uC+VXGvdQMC+P9/loUkkCfC9DxkvpmbOffkZm6tJtTEuCmwbln1qlgIXs5QoEmIWRVzGfR2oUaGABGCQDVUApwD/wSlv+ygRdEdYkxPETtSjDsfVjetd61U5WjKFG1vtz/EScz2O2/dJ9XVkAmcbRAlryQKHpuvXl7+JBq0QTFBj6UJ/A1tIVlGDR0qc4TrkEUsfH5DPiE+JS2qn7jyA/+5/PtIgHJ/LaoGs/tifp3+2wCOfieUjn+G/AkI5WFLUTFwB45hOK6bGdgA2OJqORbim5SdfFGyU4up3ijyKtQYbQ3VAAAAAElFTkSuQmCC","3":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAMAAACo5erwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAC6UExURQAAAAAAAAAAAAAAAC0fAgAAAC8gAi4fAgAAADIiAgAAADYlAwAAAAAAADwpAz4qAz4rAz4rA0MuAwAAAAAAAEYwA0cxBH9SD4FTD4RWEIdZEolbEopcE49gFJFjFZNkFpNlFpdnF5pqGJprGJ9vGqFxG6Z1Had3Ha18H7SCIrmHI7+NJsWRKMyYKs+IF8+bK9KMG9iWJdijL9qaKdubKt6fLuGkM+KmNeOoN+euPemwP+23RvC7SvfGVf0ToTsAAAAUdFJOUwAeKj5GXl98foSet77e3uTk5fj++gHqYAAAAQVJREFUKM+V09tywiAQBmDRRNOA1EZKerbamqrV2pOJxPT9X6uBBcKFwfa/yHwz7OzukKHT0elT2reMuprd6ASb4O0GW7JQM2QnaBPwzy0PDBlBiogwP50FNkW+xoZmQj3KTz0dU8rXpXjl9PxiJMnYMJIZytJWhmaLs2yxXB2qg1guMiD7W3pmg+SlKKufqiy+55eK6njcVB5njJobzITcIJ/zgaI8Jj1iKlvo3CN+3otS7HdPGAi3FJrSNro/cZYX+W5a/0hF6I+IHXWcboOHr8fJx71qUPPfDfDN+x3nt2/XGEjsssRHp0F6lQRBkqYYiGJdGiMfm8BLUl+gei7wZjyU+QWMqi+HmOAR+QAAAABJRU5ErkJggg==","4":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAMAAACo5erwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADMUExURQAAAAAAAAAAAAAAAC0fAgAAAC8gAiEWAS4fAgAAADIiAhUOAQAAADYlAwAAADIjAgAAADwpAz4qAz4rAz4rA0MuAwAAAAAAAAwIABkRAUEtA0YwA0cxBH9SD4FTD4RWEIdZEolbEopcE49gFJFjFZNkFpNlFpdnF5pqGJprGJ9vGqFxG6Z1Had3Ha18H7SCIrmHI7+NJsWRKMyYKs+IF8+bK9KMG9iWJdijL9qaKdubKt6fLuGkM+KmNeOoN+euPemwP+23RvC7SvfGVScirZUAAAAXdFJOUwAeKj5GXl9gfH6ElZ63vsXe3uTk5fj+X3hDtgAAAQlJREFUKM+V09tSwjAQBmACDVolkYA1HlIRVESooCCeaEmp7/9OktIkOzTW8b/ofBfb3Z1kUqsVaTLWLLPu+/VK2pDlgpSJOceVNPHEx1J4+0SUc4oqCBZYJPGc7HM7Sg9zs5hOGBPzVL4I1jntarKTY7+tStu+ioNYb3EUTWfPm2wjZ9MIcHzB/0hDbxA8JWn2naXJ1+TK8vLcVJ5xF1vInmAk1dh4Ig4tD6iupA0nwTmS8Vqmcr16JJBYl+JfCC9xFCfx6mF7e4CImlFuwgZ3n8P799u8geE/GpCbt4EQ/dcegVTLUmr2LhM0CK8DzwvCkEBiddCoVfzloM3u+eRfwN2byb9uqvwAfIo7KE0+sZ8AAAAASUVORK5CYII=","5":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAMAAACo5erwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAC6UExURQAAAAAAAAAAAAAAAC0fAgAAAC8gAi4fAgAAADIiAgAAADYlAwAAAAAAADwpAz4qAz4rAz4rA0MuAwAAAAAAAEYwA0cxBH9SD4FTD4RWEIdZEolbEopcE49gFJFjFZNkFpNlFpdnF5pqGJprGJ9vGqFxG6Z1Had3Ha18H7SCIrmHI7+NJsWRKMyYKs+IF8+bK9KMG9iWJdijL9qaKdubKt6fLuGkM+KmNeOoN+euPemwP+23RvC7SvfGVf0ToTsAAAAUdFJOUwAeKj5GXl98foSet77e3uTk5fj++gHqYAAAAQZJREFUKM+N09tywiAQBmDRxKZZpG1KSU9qT6baau3JRGJ8/9dSCCQEmE7/C+a7YNkdGHo9lSEhQx+jvmI/8rENrFfgIw0VQ+pjk4B9r1ngIcVIEmHqoTHAqsiX4KFuduzqoeoOhLBlyd8ZObs4t0jpKBIZiaouQz3FaTZfvO2qHV/MM4f0jwz0BMlrUVb7qix+Z1c25c7LtshgjNobzLhom8/YiU2xEw+wLjJp3CO8bHnJt5tncFhfWKirOjQf8Skv8s3j8fVs1q0QbroaNA+Y/DxMv8ayqsv/HQC3n/eM3X3cgEPczI0dGgek10kQJGkKDlGsqmLksE39feTqUP6c+vvYFDkAqCc3/Wn6FlkAAAAASUVORK5CYII=","6":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAMAAACo5erwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADMUExURQAAAAAAAAAAAAAAAC0fAgAAAC8gAiEWAS4fAgAAADIiAhUOAQAAADYlAwAAADIjAgAAADwpAz4qAz4rAz4rA0MuAwAAAAAAAAwIABkRAUEtA0YwA0cxBH9SD4FTD4RWEIdZEolbEopcE49gFJFjFZNkFpNlFpdnF5pqGJprGJ9vGqFxG6Z1Had3Ha18H7SCIrmHI7+NJsWRKMyYKs+IF8+bK9KMG9iWJdijL9qaKdubKt6fLuGkM+KmNeOoN+euPemwP+23RvC7SvfGVScirZUAAAAXdFJOUwAeKj5GXl9gfH6ElZ63vsXe3uTk5fj+X3hDtgAAAQZJREFUKM+F09lWwjAQBmACDVJlIhFrXFJ3BaGCgrjRklLf/50kpWnmSFr/i5zvZpYmp41GkTbn7Vo2fb+5SxtYzKGWVAi6yzKe/FxIr4aECcHIX6IF5kk8gxpuppq5iMV04FzOUvUq+dFx30F+eOD3dFXP1zGkZov9aDJ9WWdrNZ1Ebo7OhCsts0HwnKTZT5Ym3+MLJ89Py6ITW98l9gYjpWfFY9lxco+ZItayRPcIo5VK1Wr5BBWkpopi4kccxkm8HGyezE3CyqmIuMH91+PDx11e5eJ/DeD6/VbKm7crqKDem7HyEwqiBuFl4HlBGEIFqb5z0i0aGNps/5n8dHP7++Qnos4vYfBE0asS4CcAAAAASUVORK5CYII=","7":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAMAAACo5erwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAC6UExURQAAAAAAAAAAAAAAAC0fAgAAAC8gAi4fAgAAADIiAgAAADYlAwAAAAAAADwpAz4qAz4rAz4rA0MuAwAAAAAAAEYwA0cxBH9SD4FTD4RWEIdZEolbEopcE49gFJFjFZNkFpNlFpdnF5pqGJprGJ9vGqFxG6Z1Had3Ha18H7SCIrmHI7+NJsWRKMyYKs+IF8+bK9KMG9iWJdijL9qaKdubKt6fLuGkM+KmNeOoN+euPemwP+23RvC7SvfGVf0ToTsAAAAUdFJOUwAeKj5GXl98foSet77e3uTk5fj++gHqYAAAAQFJREFUKM+F03FXgjAQAHCnQ4mbq2gNS1PLJC3NsgSH9P2/lrCxofY87w/e7z242+1412hU0ea8fYF+s2LTd6wDVku4QOFV9ISjCyrXK0lxCkY0CROWBw0s02QBOO25RQPHLVDgXC4y9SH59e3NeQrR9cvolgUKeraLq3g2f9/lOzWfxRjFabRsB+FbmuV/eZb+Tu8R6qS7Oj8g9QRjVZ6VTGUHYZnEWszmH84RXrcqU9vNBDCa2Xm2wNEY5UuSJpvn4pchNKcS9r+B4v3wZzz6ftKfniVSAB6/BlL2Px8AI3NXYOzkChD1QkrDKAKMJKgKBMSwDrMz+olRL5HZJLdPe2aSQHMsU5PIAAAAAElFTkSuQmCC","8":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAMAAACo5erwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADJUExURQAAAAAAAAAAAAAAAC0fAgAAAC8gAiEWAS4fAgAAADIiAhUOAQAAADYlAwAAADIjAgAAADwpAz4qAz4rAz4rA0MuAwAAAAwIABkRAUEtA0YwA0cxBH9SD4FTD4RWEIdZEolbEopcE49gFJFjFZNkFpNlFpdnF5pqGJprGJ9vGqFxG6Z1Had3Ha18H7SCIrmHI7+NJsWRKMyYKs+IF8+bK9KMG9iWJdijL9qaKdubKt6fLuGkM+KmNeOoN+euPemwP+23RvC7SvfGVbqNE7kAAAAWdFJOUwAeKj5GXl9gfH6ElZ63vsXe3uTk5fhyoc7hAAAA80lEQVQoz43T2VaDQAwGYKadoY6SsWMlLsG1ahdstbVuhQ7g+z+UFxUU9Bhy9d0k50/Oied9lW+t35YdrTtes2C1hLZUiKrZL+l1RbIdhUE0ohlgmSYLaEeFWI8gwVpaZO6R7MHh4H/a/T3dR0Tsa63KFLvxbP6QF7mbz2KWk2OsqlsmCO/TrPgosvR9esrx5KjqD8T3BWOXF7lLprTDsWfK/p93hMnGZW6zHgNPVQ6onZFGSZqs70jyFOZ3AE/S8O325uWaJM8/B8DF8xXR5dM58FSIaExjBYjOQinDKAKeCjEQIqgP2D6Kb63Pc/tJ1T99AjsETOLEMsW9AAAAAElFTkSuQmCC","9":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAMAAACo5erwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAC3UExURQAAAAAAAAAAAAAAAC0fAgAAAC8gAi4fAgAAADIiAgAAADYlAwAAAAAAADwpAz4qAz4rAz4rA0MuAwAAAEYwA0cxBH9SD4FTD4RWEIdZEolbEopcE49gFJFjFZNkFpNlFpdnF5pqGJprGJ9vGqFxG6Z1Had3Ha18H7SCIrmHI7+NJsWRKMyYKs+IF8+bK9KMG9iWJdijL9qaKdubKt6fLuGkM+KmNeOoN+euPemwP+23RvC7SvfGVbKFEEwAAAATdFJOUwAeKj5GXl98foSet77e3uTk5fgBvXPGAAAA0klEQVQoz42TWxOCIBCF1bCsNSoJu9+zLM1uapj9/9+VWk7J054H5huYPRyWWUX5qk5pHY+GpsiCwAc8Ml2uJ/wacIJGZqpyAD+OPEAjq0QgQCn3EnHktNPropCxtmHoZYqms3cPz/Qp3L2DRFaoViawdnGSvtIkvm/7OCzqW+qvg47IL4i2vIHDvP6/j7B5iEQ8wjUgMTeotJGvojgKl9k/4VAKkG3Obov5ZVqcY1A2gNF5wvn4NAQkmtITwB5YhFi2DUhUW1WDz6AUKxI14ztPbxyqR0vFOTcgAAAAAElFTkSuQmCC","10":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAMAAACo5erwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACcUExURQAAAC0fAi8gAi4fAjIiAjYlAzwpAz4qAz4rAz4rA0MuA0YwA0cxBH9SD4FTD4RWEIdZEolbEopcE49gFJFjFZNkFpNlFpdnF5pqGJprGJ9vGqFxG6Z1Had3Ha18H7SCIrmHI7+NJsWRKMyYKs+IF8+bK9KMG9iWJdijL9qaKdubKt6fLuGkM+KmNeOoN+euPemwP+23RvC7SvfGVdNFZEkAAAALdFJOUwBGX3yEt97k5OX4fmIk4AAAALBJREFUKM+d08kWgjAMBdAWSVQMziOgKIgTQ2n9/39zIUiXhre6q/Q1PRWiiYPo9GAXyFLowV8kPTKSbFoF0rJIgM3mdECkpFYXwuF49DcR2hZudIrP2mgVnyIOA7dt4B3L2rxNXb7CCYOe7DYYKW20KkIaMGjtEYJK1arKD8Ci/Yj7oizyHUkW7QHr53ZzX5Fk0brC/LYkWlxnwKI1wJ96Unq+Dyx2+f4OB9FhUQghPhJkOFnw8zHfAAAAAElFTkSuQmCC"},"categories":{"Artist CG Sets":"data:image/png;base64,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","Asian Porn":"data:image/png;base64,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","Cosplay":"data:image/png;base64,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","Doujinshi":"data:image/png;base64,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","Game CG Sets":"data:image/png;base64,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","Image Sets":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAYCAYAAABKtPtEAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAd0SURBVFjD5VjrT1vnHSYxYAM22AYbsA3mYnM3gWBuCeCAHRswYMLFIZArTgokgZDLSNKmidpuUqN0m9apWtV8qJZNWltt01btlmmqunRLu3brprbpbV13+Ueeve/vcF7OObYJZB+maUd69Ltf38PxOWQAyOCo33cZ/wuoC6yhtu8SanovwLt3FZ495+DpXkZ11xlUdSyhsn0BFf5TcLclUL57HmUtx+HadRTO5sNwNM2itHEGJQ1xyHOL4Wdv/Avxxz/D1OWPiOc4+MRfBa/E9JVPUuq3Cjlv/PHPiSprkrz2YVJM/OqnW6or5+T+2nilXOQZoyXQ8NNXHmBy7YNNGv5iS4NNXHwfh67/AzPX/kbL5LpD1/9JdObal1teEI9PqX/y7+v0y6SFyraU/V/7gnLyODl26vIDFJTvl05/+urnAgcu/gWjK/cxdeUzoZv4ykcqn9j591TyBvgd9Anxk5c/TuuTWi9hcu0Bq/ehkMcvvM96+XS97h9V/XDfdHnGVt8VPUyufUxzaesbHX3SAg5c+gAjy78n+jCMX/gzW9A7Kl3s/J8wfPpNssm6sdX3iA6fuafy5bJsS4WhxTdUeVP5jCzfl+jK25v2GmPL41TbrzyHwdYpLWBk5V0Mn72P8GO/IT49/iD5nrn/EL8N7D91N0kXSvxC8NHld1S2COshevZt4odO/27T3NpYilm6tx77luCFjeXjelnOsrRICxhceksgdPIueg7eQVv0FhrZE7e+ZxW7h26id/YHZOM+kcXfqmJkcL3SFlm8J/jwY2+oZFXcwpsp9TIGTvyc6vOedoVuEN0bv4PAkR8l+fIeuW/n+Avwj35T1Xfo5K9VvjuM9dICgswgo2f2FTT2X4XFwbbDfiQ4OM913MZ9eudeQ+DoT9B/4mfoO/JjEdvPGuXywPwvVTll9LGGOVXae1iDpEv8SugGEneJ7jv+OgLHfoq2kW+gvHkaeWY3DEY79ePtXEDb6PNkl+N6D/8Q3dMvw9u1SD4cVf4TpNP2wmfIyK2RFtA19TIb6HVC6/DX4agdhvYyl/hQ1XYCNd1nUe1PMH6eqJf9/vqCN+CPvcAKfRctQ7dIru+9RLRj/EXSd8ReJNnTsYDK3ccoT9PAdbQy/5bBm2STc/GYPfHvUz+c5/1k0C+2sp9mlmsRLZFnVfV4T5l6k/Djcd7O0yKfEmIBe2ZeE/DHXoK9KqgqKN8JmdlGwSuRnVMIZ30M3u5zBFtFADn5LkKJJwJX4xRRLu/YmSni9LlF7JT8sDj9xHNbNqM8V1PwaXRO3iHKddpe+MXr8Njs3EKK5TnkHpX+xZ4wzcXnax+/Lc168NWNBfjCN9Ex+T1CW+w2SmtGUi5gs4vb8yzVyLc1JOk3i09l47K9KgTf/puoD1yjBWv9c0xOpremjNXqTIW1aI7cEjO2T9whKhbQOnYbu0a+Q9Q3+C04GqY2XcBmfKqBHyWXweRgr7praBj4GgrdfWnrbKUna1k3msLPoWX0JZpRBi2Av1v7Br+tQmndxH+0gFSnvJVcysuQX4aqzlXUBp6Cq/kY9HnFW74rtX5FlSHU9t6g2Zoiz4s5aQHevedQF7wl4O17Glb3vkdewHaXlO5kzc5uVHSwj52eJ+FqScBY1Ljl2KQ7gM1TE/jq+nxPwRt4hnhaQCV7knr6nhGo6FpDgaPjv7qATH0BCivDcLUuobx9FTZvbFvL0+r5POXt51VzctAC+Ceju+sJgst/AY6WJZiK2x56W233T2A7D0F+Wdwh6sXZusK+3Mahz3dv+eGq1fN5eC55Tg7n7hVpAQ7fHBMuCpT42EtERRTZRpdIpMs2ISu3BJmGQuiyTCSraJZk15sqYCioJr02NmOHLu0JZeqtlHunzkA0r4i9xFRGqZfSXcuw1R1BvqOX5S+nfLKPsbidaKbBKmJzrA2kz2U021hGMp+H56L5mk+LWWkBxXVTsDUuwO47A1vTEooaTsHqPQSTK0RfSyZnP+MHkF8WQUHFCArcUYkyCB1hFBZPnJBfHpHiGCS/MPTmmpQnpTfXihxGR4Bqct5aM0e98L6K6uZJlnPxulwurDsu9KIe60/uw1x1gKDKVZ+QZmUz0wIKPazxGpao7qSApTYBs/fohqyxK/2s3NdzmPkf2fDjeoVfQfUMjM4QG7YeO7ML2EuLnp2kGQZrM0xlQyzuWMr8Uo15qY5CNnvmknzSxUtIpKxBCzC7wzBVHWaYW6cbMFYclGjlLEyVc4InWennjjPdoaR4ZZ68shhySgagL+okcJ7r5BrK/Nr6Wn5DF1fFpq8/k6xjdWgBJmcABscYDM5x5JRNbRsG10RK2VAafaT4bdfX9G0oHZZ41yTLfSBNzUmitIAcexd09iFCZvHI5rBHiepsEZVeZx9e56MKHctpG3x4zjTQ2cJSPZZbZx/U1BtU1AgLHfVhV/eQnDsq+qcF8GdRlpl9+lpDaph7FXxAbbME12m/Qh9MzmEZWMc+CUn2/mSdrOdxKW3BDUo+QXVtEafph9cXcwRpePFfYWJya6WN/J9AnvvfQsJsCpRqUEEAAAAASUVORK5CYII=","Manga":"data:image/png;base64,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","Misc":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAYCAMAAAB9agt2AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHyUExURf///xYWFhgYGBkZGRsbGxwcHB0dHR8fHyAgICIiIiMjIyQkJCUlJSYmJigoKCkpKSoqKisrKywsLC0tLS4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTY2Njc3Nzg4ODk5OTo6Ojs7Ozw8PD09PT4+Pj8/P0BAQEFBQUJCQkNDQ0REREVFRUZGRkdHR0hISElJSUpKSktLS0xMTE1NTU5OTk9PT1BQUFJSUlNTU1RUVFVVVVZWVldXV1hYWFlZWVtbW1xcXF1dXV5eXl9fX2BgYGJiYmNjY2RkZGVlZWdnZ2hoaGlpaWpqamtra2xsbG1tbW5ubm9vb3BwcHFxcXJycnNzc3R0dHV1dXZ2dnd3d3h4eHl5eXt7e3x8fH5+fn9/f4CAgIGBgYKCgoODg4SEhIWFhYaGhoeHh4iIiImJiYyMjI6Ojo+Pj5CQkJGRkZKSkpSUlJWVlZaWlpeXl5iYmJmZmZqampubm5ycnJ2dnZ6enp+fn6CgoKGhoaKioqOjo6SkpKWlpaampqenp6ioqKmpqaqqqqysrK2tra+vr7GxsbKysrOzs7S0tLW1tbe3t7i4uLm5ubq6uru7u7y8vL29vb6+vr+/v8DAwMHBwcLCwsPDw8TExMXFxcbGxsfHx8jIyMnJycrKysvLy8zMzP///9GzQ1EAAAABdFJOUwBA5thmAAADN0lEQVQYGQXBO45jWQEA0HM/zy67ump6xCCBkBAJCyCcjGAW4h0QExOSImIvhQgxGRtAIgIE6qnpdtnvvfvlnMAFAGDMOeYYY44x5phjzjHmHGPMOcYcY8wxxhxjzPEvweU7PM7AiB5negKPM768mqHcv6Yu0DL48XjC7z6Fy3cAbl62J7QeFx7n/ehxBj79BIByQFlm9GPqv8827x+AxT1tt5db9NwZn/P9HD8fwfM9YQvHL6912eCRPj/F/KjZD6e0qsuIQF4z9wilP8KXV4CeeprrsmpmTYk49EPL4q6tL/uI7x9YT30sAHTHnbpomaYBbOOsHDqzZ4V2XBOHR5bKDLcvn9rx4+tW/h3F5Xh6PZbH+e15z+1Yl9nzfuwpvj0rc6R3uW0janXmSNueGJ/++f3t+dtfpX98f4u/fP36517ELW1qn/f+EppNnWmDNct1DdaTMbCe3ts8vf3tT1x+6y9XLld//MXL43wKb/Pp41M/7vtMS0/rYWZoci09xTXaU4xxN+P+wzv8HbiI/yvzq5/e/+Nnv/7mVN2f19Hy3pdOy+TyyF2JOYxR+xNscL24wtXlv1curvz5mMywlaCEWfYjhdzWZYYR237Ee0hUAMDVhavL6VtbOdie3k4MNiNWsc1bLa2UUEopo6+ldFzgAnAFH2cvdS+tpFI+t/alPGqZcl3nSl32IxghFHAFcLm6XjDCVkOb+mzLRl97DJtYt/t2v/Vtbtu2vW9lvw+4cAG4AG8/ft62x23f9r7ZtrbVx63JrSgUMGJh5gMAcOXicr36w1hQGBE9GTMJv/lQDiPWpeWegPXtUziGzcm6k3KfXlO7OX/z4TADqAtmMPw1l809safmsYB+PghhiF7mDDM06Sn1Dz2NOrQ8AzrqohzkumlxJq0nvWXGlBH1mWNdOKK3QxixVnMPfQH0nja5TnqqWHPLDdS6MGc0YkkzzMCaLAHM0XtSUwjsUa4VGHFUewhmQJ0hmIIRTWFEvXUzQMtG1EZkRLkMWgpg6hl6DJgjwYjQY2g90ZOWGVMCgq8GmIER0fKIY84YjWhELTMDzGCEAIAZ3mfgNOccc04AAAAAAACY/g+uyCRTkdJmJAAAAABJRU5ErkJggg==","Non-H":"data:image/png;base64,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","Private":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAYCAMAAAB9agt2AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB7UExURf///wAAAAEBAQICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCwwMDA0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR4eHh8fHyAgICEhISIiIiMjIyQkJCUlJSYmJuALC2XtRuwAAAABdFJOUwBA5thmAAACPklEQVQYGQXBsZIe1RkFwD73zooVVRSBM0UEVs37P85EZJBbBrP7z3zH3eEbAAAAAAAAAP4Q337BLKAxiwbMwrM1MwcNNOBeC//5M99+AfDYs9AmzJplFnAfAMzCRDz8OIxnA/Fknv3EKr1zL/cC6wnGenYzMLmTPHO4V0bTQGXCE2if3AegTWMyyiRKmx5Snd16Ns9uFwroLrM0VAHGNqvoYWieaJ4+9z3rONY2z50cexbMeLV7HY1mVuO1TeWZQxtthfvvv18cP79/qc+XL/tZBXn98z9f3/dja6pdhVk9jM7SlI///huuj/d9f/zm969vZq322a8f312/zt291k4zEegc2mTiiczD5TyvjzUuPjfH2359msFfr49nv3/tUbNSGj08qYqaG+DkOl2n63St71w4r/vk6tel2llUl3ZafVoB4AJgrsuJy+lyfvRpzWinzxzts6oMxckFADgBOMkYs8xqqsdMh2YWxWUDuE4up+sEuPjJI0OnMXO01a6mgOP9/gfACQBgbTSlhq6ZTs3MzFis97djAcC6nLicLuf5vTPPzMwzM9PJv6ZpmqZ5Xrfjbc3r7jbdXs1Pmc/KxurTHG97aYD6ccyY1IhxLEsdS1R6NMletaKk061D0Wh6tFphgk0rGyppcKBWwy4FaNMeHZpi0hS0oWIyASZSoGlUMLG/FKjSUtBGUVBRCkpR1OvoUKFKQ1VoBW3QSptqNAwpan9+KYBCNW1LKQWABgD4aHhHURRFURQAAABQ/wft1tBppY79vgAAAABJRU5ErkJggg==","Western":"data:image/png;base64,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"}};
	fetch = {
		original: {value: "Original"},
		geHentai: {value: "g.e-hentai.org"},
		exHentai: {value: "exhentai.org"}
	};	
	options = { 
		general: {
			'Automatic Processing':        ['checkbox', true,  'Get data and format links automatically.'],
			'Gallery Details':             ['checkbox', true,  'Show gallery details for link on hover.'],
			'Gallery Actions':             ['checkbox', true,  'Generate gallery actions for links.'],
			'Smart Links':                 ['checkbox', false, 'All links lead to E-Hentai unless they have fjording tags.'],
			'ExSauce':                     ['checkbox', true,  'Add ExSauce reverse image search to posts. Disabled in Opera.']
			/*'Filter':                      ['checkbox', true,  'Use the highlight filter on gallery information.'],*/
		},
		actions: {
			'Show by Default':             ['checkbox', false, 'Show gallery actions by default.'],
			'Hide in Quotes':              ['checkbox', true,  'Hide any open gallery actions in inline quotes.'],
			'Torrent Popup':               ['checkbox', true,  'Use the default pop-up window for torrents.'],
			'Archiver Popup':              ['checkbox', true,  'Use the default pop-up window for archiver.'],
			'Favorite Popup':              ['checkbox', true,  'Use the default pop-up window for favorites.']
			/*'Favorite Autosave':         ['checkbox', false, 'Autosave to favorites. Overrides normal behavior.']*/
		},
		/*favorite: {
			'Favorite Category':           ['favorite', 0, 'The category to use.'],
			'Favorite Comment':            ['textbox', 'ExLinks is awesome', 'The comment to use.']
		},*/
		sauce: {
			'Inline Results':              ['checkbox', true,  'Shows the results inlined rather than opening the site. Works with Smart Links.'],
			'Show Results by Default':     ['checkbox', true,  'Open the inline results by default.'],
			'Hide Results in Quotes':      ['checkbox', true,  'Hide open inline results in inline quotes.'],
			'Show Short Results':          ['checkbox', true,  'Show gallery names when hovering over the link after lookup (similar to old ExSauce).'],
			'Search Expunged':             ['checkbox', false, 'Search expunged galleries as well.'],
			'Lowercase on 4chan':          ['checkbox', true,  'Lowercase ExSauce label on 4chan.'],
			'No Underline on Sauce':       ['checkbox', false,  'Force the ExSauce label to have no underline.'],
			'Use Custom Label':            ['checkbox', false, 'Use a custom label instead of the site name (e-hentai/exhentai).'],
			'Custom Label Text':           ['textbox', 'ExSauce', 'The custom label.'],
			'Site to Use':                 ['saucedomain', fetch.exHentai, 'The domain to use for the reverse image search.']
		},
		domains: {
			'Gallery Link':                ['domain', fetch.original, 'The domain used for the actual link. Overriden by Smart Links.'],
			'Torrent Link':                ['domain', fetch.original, 'The domain used for the torrent link in Actions.'],
			'Hentai@Home Link':            ['domain', fetch.original, 'The domain used for the Hentai@Home link in Actions.'],
			'Archiver Link':               ['domain', fetch.original, 'The domain used for the Archiver link in Actions.'],
			'Uploader Link':               ['domain', fetch.original, 'The domain used for the Uploader link in Actions.'],
			'Favorite Link':               ['domain', fetch.original, 'The domain used for the Favorite link in Actions.'],
			'Stats Link':                  ['domain', fetch.original, 'The domain used for the Stats link in Actions.'],
			'Tag Links':                   ['domain', fetch.original, 'The domain used for tag links in Actions.']
		},
		debug: {
			'Debug Mode':                  ['checkbox', false, 'Enable debugger and logging to browser console.'],
			'Disable Local Storage Cache': ['checkbox', false, 'If set, Session Storage is used for caching instead.'],
			'Populate Database on Load':   ['checkbox', false, 'Load all cached galleries to database on page load.']
		}/*
		filter: {
			'Name Filter': ['textarea', [
				'# Highlight all doujinshi and manga galleries with (C82) in the name:',
				'# /\\(C82\\)/;only:doujinshi,manga;link:yes;color:#FF0000'
			].join('\n')],
			'Tag Filter': ['textarea', [
				'# Highlight "english" and "translated" tags in non-western non-non-h galleries:',
				'# /english|translated/;not:western,non-h;color:#0069B6',
				'# Highlight all non-english language tags in doujinshi/manga/artistcg/gamecg galleries:',
				'# /korean|chinese|italian|vietnamese|thai|spanish|french|german|portuguese|russian|dutch|hungarian|indonesian|finnish|rewrite/;only:doujinshi,manga,artistcg,gamecg;color:#FF000',
				'# Highlight the link for galleries tagged with "touhou project":',
				'# /touhou project/;link:yes,color:#FF3300'
			].join('\n')],
			'Uploader Filter': ['textarea', [
				'# Highlight links for galleries uploaded by "ExUploader"',
				'# /ExUploader/;link:yes;color:#FFFFFF'
			].join('\n')]
		},*/
	};	
	regex = {
		url: /(http:\/\/)?(forums|gu|g|u)?\.?e[\-x]hentai\.org\/[^\ \n<>\'\"]*/,
		site: /(g\.e\-hentai\.org|exhentai\.org)/,
		type: /t?y?p?e?[\/|\-]([gs])[\/|\ ]/,
		uid: /uid\-([0-9]+)/,
		token: /token\-([0-9a-f]+)/,
		page: /page\-([0-9a-f]+)\-([0-9]+)/,
		gid: /\/g\/([0-9]+)\/([0-9a-f]+)/,
		sid: /\/s\/([0-9a-f]+)\/([0-9]+)\-([0-9]+)/,
		fjord: /abortion|bestiality|incest|lolicon|shotacon|toddlercon/
	};
	t = {
		SECOND: 1000,
		MINUTE: 1000 * 60,
		HOUR: 1000 * 60 * 60,
		DAY: 1000 * 60 * 60 * 24
	};
	d = document;
	conf = {};
	tempconf = {};
	pageconf = {};
	
	/* 
		Inspired by 4chan X and jQuery API:
		http://api.jquery.com/
		Functions are not chainable.
	*/
	$ = function(selector, root) {
		if(root == null) { root = d.body; }
		return root.querySelector(selector);
	};
	$$ = function(selector, root) {
		if(root == null) { root = d.body; }
		return Array.prototype.slice.call(root.querySelectorAll(selector));
	};
	$.extend = function(obj, properties) {
		for ( var k in properties ) {
			obj[k] = properties[k];
		}
	};
	$.extend($, {
		elem: function(arr) {
			var frag = d.createDocumentFragment();
			for ( var i = 0, ii = arr.length; i < ii; i++ )
			{
				frag.appendChild(arr[i]);
			}
			return frag;
		},
		frag: function(content) {
			var frag, div;
			frag = d.createDocumentFragment();
			div = $.create('div', {
				innerHTML: content
			});
			for ( var i = 0, ii = div.childNodes.length; i < ii; i++ ) {
				frag.appendChild(div.childNodes[i].cloneNode(true));
			}
			return frag;
		},
		textnodes: function(elem) {
			var tn = [], ws = /^\s*$/, getTextNodes;
			getTextNodes = function(node) {
				var cn;
				for ( var i = 0, ii = node.childNodes.length; i < ii; i++ )
				{
					cn = node.childNodes[i];
					if(cn.nodeType === 3)
					{
						if(!ws.test(cn.nodeValue))
						{
							tn.push(cn);
						}
					} else
					if(cn.nodeType === 1)
					{
						if(cn.tagName === 'SPAN' || cn.tagName === 'P')
						{
							getTextNodes(cn);
						}
					}
				}
			};
			getTextNodes(elem);
			return tn;
		},
		id: function(id) {
			return d.getElementById(id);
		},
		prepend: function(parent, child) {
			return parent.insertBefore(child, parent.firstChild);
		},
		add: function(parent, child) {
			return parent.appendChild(child);
		},
		before: function(root, elem) {
			return root.parentNode.insertBefore(elem, root);
		},
		after: function(root, elem) {
			return root.parentNode.insertBefore(elem, root.nextSibling);
		},
		replace: function(root, elem) {
			return root.parentNode.replaceChild(elem, root);
		},
		remove: function(elem) {
			return elem.parentNode.removeChild(elem);
		},
		tnode: function(text) {
			return d.createTextNode(text);
		},
		create: function(tag, properties) {
			var elem = d.createElement(tag);
			if(properties) {
				$.extend(elem, properties);
			}
			return elem;
		},
		on: function(elem, eventlist, handler) {
			var event;
			if(eventlist instanceof Array) {
				for ( var i = 0, ii = eventlist.length; i < ii; i++ ) {
					event = eventlist[i];
					elem.addEventListener(event[0],event[1],false);
				}
			} else {
				elem.addEventListener(eventlist,handler,false);
			}
		},
		off: function(elem, eventlist, handler) {
			var event;
			if(eventlist instanceof Array) {
				for ( var i = 0, ii = eventlist.length; i < ii; i++ ) {
					event = eventlist[i];
					elem.removeEventListener(event[0],event[1],false);
				}
			} else {
				elem.removeEventListener(eventlist,handler,false);
			}
		}
	});
	Debug = {
		on: false,
		timer: {},
		value: {},
		init: function() {
			if(conf['Debug Mode'] === true) {
				Debug.on = true;
			}
			$.extend(Debug.timer, {
				start: function(name) {
					if(Debug.on) {
						Debug.timer[name] = Date.now();
					}
				},
				stop: function(name) {
					if(Debug.on) {
						Debug.timer[name] = Date.now() - Debug.timer[name];
						return Debug.timer[name]+'ms';
					}
				}
			});
			$.extend(Debug.value, {
				add: function(name,value) {
					if(Debug.on) {
						if(!Debug.value[name]) {
							Debug.value[name] = 0;
						}
						if(value) {
							Debug.value[name] += value;
						} else {
							Debug.value[name]++;
						}
					}
				},
				get: function(name) {
					if(Debug.on) {
						var ret = Debug.value[name];
						Debug.value[name] = 0;
						return ret;
					}
				},
				set: function(name,value) {
					if(Debug.on) {
						Debug.value[name] = value;
					}
				}
			});
		},
		log: function(arr) {
			if(Debug.on) {
				var log;
				if(arr instanceof Array) {
					log = arr;
				} else {
					log = [arr];
				}
				for ( var i = 0, ii = log.length; i < ii; i++ )
				{
					console.log('ExLinks '+Main.version+':',log[i]);
				}
			}
		}
	};
	UI = {
		html: {
			details: function(data) { return '<div id="exblock-details-uid-'+data.gid+'" class="exblock exdetails post reply post_wrapper"><div class="exthumbnail" style="background-image:url('+data.thumb+')">&nbsp;</div><div class="exsidepanel"><div class="excategory"><img src="'+img.categories[data.category]+'" alt="'+data.category+'"></div><div class="exsidebarbox"><b>Rating:</b><br><img src="'+img.ratings[Math.round(parseInt(data.rating,10)*2)]+'" alt="'+data.rating+'"><br><span style="opacity: 0.65; font-size: 0.95em">(Avg. '+data.rating+')</span></div><div class="exsidebarbox"><b>Files:</b><br>'+data.filecount+' images<br><span style="opacity: 0.65; font-size: 0.95em">('+data.size+' MB)</span></div><div class="exsidebarbox"><b style="margin-right:4px">Torrents:</b>'+data.torrentcount+'</div><div class="exsidebarbox" style="margin-bottom: 0px"><b style="margin-right:4px">Visible:</b>'+data.visible+'</div></div><a class="exlink extitle uid-'+data.gid+'" href="#exdetails-'+data.gid+'">'+data.title+'</a>'+data.jtitle+'<br><br><span style="font-size:1.0em !important">Uploaded by<b class="exlink exuploader uid-'+data.gid+'" style="font-size:1.0em!important;margin:0 5px">'+data.uploader+'</b>on<b style="font-size:1.0em!important;margin: 0 5px">'+data.datetext+'</b></span><br><br><span class="extags uid-'+data.gid+'" style="font-size: 1.05em !important; display: inline !important"><b style="font-size:1.05em!important;margin-right:2px!important">Tags:</b></span><br style="clear: both"></div>'; },
			actions: function(data) { return '<div class="exblock exactions uid-'+data.uid+'"><table class="exactions-table" style="display: inline-block; vertical-align: top; width:100%"><tr><td style="vertical-align: top">'+data.category+' | '+data.filecount+' files | View on:<a href="'+data.url.ge+'" class="exaction" target="_blank" style="text-decoration: none !important; vertical-align: top; margin: 0 4px; margin-right: 0px">e-hentai</a><a href="'+data.url.ex+'" class="exaction" target="_blank" style="text-decoration: none !important; vertical-align: top; margin: 0 4px">exhentai</a>| Download via:<a href="'+data.url.bt+'" class="exlink exaction extorrent" target="_blank" style="margin-right: 0px">torrent['+data.torrentcount+']</a><a href="'+data.url.hh+'" class="exaction" target="_blank" style="margin-right: 0px">hentai@home</a><a href="'+data.url.arc+'" class="exlink exaction exarchiver" target="_blank">archiver</a>| Uploader:<a href="'+data.url.user+'" target="_blank" class="exlink exaction exuploader uid-'+data.gid+'">'+data.uploader+'</a>|<a href="'+data.url.fav+'" class="exlink exaction exfavorite" target="_blank">Favorite</a>|<a href="'+data.url.stats+'" class="exaction" target="_blank">Stats</a></td></tr></table><span class="extags uid-'+data.gid+'" style="display: inline-block !important"><b style="margin-right:2px!important">Tags:</b></span></div>'; },
			options: function()     { return '<div id="exlinks-overlay"><div id="exlinks-options" class="post reply"><div id="exlinks-options-nav" style="text-align:left"><div style="float: right"><div class="exlinks-options-button"><a id="exlinks-options-changelog" href="https://raw.github.com/hupotronic/ExLinks/master/changelog">Changelog</a></div><div class="exlinks-options-button"><a id="exlinks-options-issues" href="https://github.com/Hupotronic/ExLinks/issues">Issues</a></div><div class="exlinks-options-button"><a id="exlinks-options-save" href="">Save Settings</a></div><div class="exlinks-options-button"><a id="exlinks-options-cancel" href="">Cancel</a></div></div><a class="exlinks-options-title" href="http://hupotronic.github.com/ExLinks/">ExLinks</a><span class="exlinks-options-version">'+Main.version+'</span></div><div id="exlinks-options-content"><span class="exlinks-options-subtitle">General Settings</span><span style="float:right;padding-top:7px;margin-right:4px;opacity:0.6">Note: You must reload the page after saving for any changes to take effect.</span><br><table id="exlinks-options-general" class="exlinks-options-table"></table><span class="exlinks-options-subtitle">Gallery Actions</span><br><table id="exlinks-options-actions" class="exlinks-options-table"></table><span class="exlinks-options-subtitle">ExSauce Settings</span><span style="float:right;padding-top:7px;margin-right:4px;opacity:0.6">Note: ExSauce is currently not available in the Foolz archive.</span><br><table id="exlinks-options-sauce" class="exlinks-options-table"></table><span class="exlinks-options-subtitle">Domain Settings</span><table id="exlinks-options-domains" class="exlinks-options-table"></table><span class="exlinks-options-subtitle">Debugger Settings</span><table id="exlinks-options-debug" class="exlinks-options-table"></table></div></div></div>'; }
		},
		details: function(uid) {
			var data, date, div, frag, taglist, tagspace, tag, content;
			data = Database.get(uid);
			if(data.title_jpn) {
				data.jtitle = '<br /><span class="exjptitle">'+data.title_jpn+'</span>';
			} else {
				data.jtitle = '';
			}
			date = new Date(parseInt(data.posted,10)*1000);
			data.datetext = UI.date(date);
			data.visible = data.expunged ? 'No' : 'Yes';
			taglist = [];
			for ( var i = 0, ii = data.tags.length; i < ii; i++ )
			{
				tag = $.create('a', {
					innerHTML: data.tags[i],
					className: "exlink extag",
					href: 'http://exhentai.org/tag/'+data.tags[i].replace(/\ /g,'+')
				});
				if( i < ii-1 ) { tag.innerHTML += ","; }
				taglist.push(tag);
			}
			div = $.frag(UI.html.details(data));
			content = div.firstChild;
			tagspace = $('.extags',div);
			content.setAttribute('style','display: table !important;');
			$.add(tagspace,$.elem(taglist));
			frag = d.createDocumentFragment();
			frag.appendChild(div);
			d.body.appendChild(frag);
		},
		actions: function(data,link) {
			var uid, token, key, date, taglist, user, sites, tag, tagstring, button, div, tagspace, frag, content;
			
			if(conf['Smart Links'] === true) {
				tagstring = data.tags.join(',');
				if(tagstring.match(regex.fjord)) {
					if(link.href.match('g.e-hentai.org')) {
						link.href = link.href.replace('g.e-hentai.org','exhentai.org');
						button = $.id(link.id.replace('gallery','button'));
						button.href = link.href;
						button.innerHTML = UI.button.text(link.href);
					}
				} else {
					if(link.href.match('exhentai.org')) {
						link.href = link.href.replace('exhentai.org','g.e-hentai.org');
						button = $.id(link.id.replace('gallery','button'));
						button.href = link.href;
						button.innerHTML = UI.button.text(link.href);
					}
				}
			}
			uid = data.gid;
			token = data.token;
			key = data.archiver_key;
			date = new Date(data.date);
			taglist = [];
			data.size = Math.round((data.filesize/1024/1024)*100)/100;
			data.datetext = UI.date(date);
			sites = [
				Config.link(link.href,conf['Torrent Link']),
				Config.link(link.href,conf['Hentai@Home Link']),
				Config.link(link.href,conf['Archiver Link']),
				Config.link(link.href,conf['Favorite Link']),
				Config.link(link.href,conf['Uploader Link']),
				Config.link(link.href,conf['Stats Link']),
				Config.link(link.href,conf['Tag Links'])
			];
			for ( var i = 0, ii = data.tags.length; i < ii; i++ )
			{
				tag = $.create('a', {
					innerHTML: data.tags[i],
					className: "exlink extag",
					href: 'http://'+sites[6]+'/tag/'+data.tags[i].replace(/\ /g,'+')
				});
				if( i < ii-1 ) { tag.innerHTML += ","; }
				taglist.push(tag);
			}
			if(data.uploader) {
				user = data.uploader;
			} else {
				user = 'Unknown';
			}
			data.url = {
				ge: "http://g.e-hentai.org/g/"+uid+"/"+token+"/",
				ex: "http://exhentai.org/g/"+uid+"/"+token+"/",
				bt: "http://"+sites[0]+"/gallerytorrents.php?gid="+uid+"&t="+token,
				hh: "http://"+sites[1]+"/hathdler.php?gid="+uid+"&t="+token,
				arc: "http://"+sites[2]+"/archiver.php?gid="+uid+"&or="+key,
				fav: "http://"+sites[3]+"/gallerypopups.php?gid="+uid+"&t="+token+"&act=addfav",
				user: "http://"+sites[4]+"/uploader/"+user.replace(/\ /g,'+'),
				stats: "http://"+sites[5]+"/stats.php?gid="+uid+"&t="+token
			};
			
			frag = d.createDocumentFragment();
			div = $.frag(UI.html.actions(data));
			content = div.firstChild;
			content.id = link.id.replace('exlink-gallery','exblock-actions');
			if(conf['Show by Default'] === false) {
				content.setAttribute('style','display: none !important;');
			} else {
				content.setAttribute('style','display: table !important;');
			}
			tagspace = $('.extags',div);
			$.add(tagspace,$.elem(taglist));
			frag.appendChild(div);
			return frag;
		},
		button: function(url,eid) {
			var button;
			button = $.create('a',{
				id: eid.replace('gallery','button'),
				className: 'exlink exbutton exfetch',
				innerHTML: UI.button.text(url),
				href: url
			});
			button.style.marginRight = '4px';
			button.style.textDecoration = 'none';
			button.setAttribute('target','_blank');
			return button;
		},
		toggle: function(e) {
			var actions, style;
			e.preventDefault();
			actions = $.id(e.target.id.replace('exlink-button','exblock-actions'));
			style = actions.getAttribute('style');
			if(style.match('table')) {
				style = style.replace('table','none');
			} else
			if(style.match('none')) {
				style = style.replace('none','table');
			}
			actions.setAttribute('style',style);
		},
		show: function(e) {
			var uid, details, style;
			uid = e.target.className.match(regex.uid)[1];
			details = $.id('exblock-details-uid-'+uid);
			if(details) {
				style = details.getAttribute('style');
				style = style.replace('none','table');
				details.setAttribute('style',style);
			} else {
				UI.details(uid);
			}
		},
		hide: function(e) {
			var uid, details, style;
			uid = e.target.className.match(regex.uid)[1];
			details = $.id('exblock-details-uid-'+uid);
			if(details) {
				style = details.getAttribute('style');
				style = style.replace('table','none');
				details.setAttribute('style',style);
			} else {
				UI.details(uid);
			}
		},
		move: function(e) {
			var uid, details;
			uid = e.target.className.match(regex.uid)[1];
			details = $.id('exblock-details-uid-'+uid);
			if(details) {
				if(details.offsetWidth + e.clientX+20 < window.innerWidth - 8)
				{
					details.style.left = (e.clientX+12) + 'px';
				} else {
					details.style.left = (window.innerWidth - details.offsetWidth - 16) + 'px';
				}
				if(details.offsetHeight + e.clientY+22 > window.innerHeight)
				{
					details.style.top = (e.clientY-details.offsetHeight-8) + 'px';
				} else {
					details.style.top = (e.clientY+22) + 'px';
				}
			}
		},
		popup: function(e) {
			e.preventDefault();
			var w = 400, h = 400, type, link = e.target;
			type = link.href.match(/gallerytorrents|gallerypopups|archiver/)[0];
			if(type === "gallerytorrents") {
				w = 610;
				h = 590;
			} else
			if(type === "gallerypopups") {
				w = 675;
				h = 415;
			} else
			if(type === "archiver") {
				w = 350;
				h = 320;
			}
			if(type) {
				window.open(link.href,"_pu"+(Math.random()+"").replace(/0\./,""),"toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width="+w+",height="+h+",left="+((screen.width-w)/2)+",top="+((screen.height-h)/2));
			}
		},
		date: function(d) {
			var pad = function(n) {
				return n<10 ? '0'+n : n;
			};
			return [
				d.getUTCFullYear()+'-',
				pad(d.getUTCMonth()+1)+'-',
				pad(d.getUTCDate())+' ',
				pad(d.getUTCHours())+':',
				pad(d.getUTCMinutes())
			].join('');
		},
		init: function() {
			$.extend(UI.button, {
				text: function(url) {
					if(url.match('exhentai.org')) {
						return '[Ex]';
					} else
					if(url.match('g.e-hentai.org')) {
						return '[EH]';
					} else {
						return false;
					}
				}
			});
		}
	};	
	API = {
		s: {},
		so: {},
		g: {},
		go: {},
		timer: window.setTimeout,
		cooldown: 0,
		working: false,
		queue: function(type) {
			if(type === 's') {
				for ( var k in API.g ) {
					if( API.s[k] ) {
						delete API.s[k];
					}
				}
				return Object.keys(API.s).length;
			} else
			if(type === 'g') {
				return Object.keys(API.g).length;
			}
			return 0;
		},
		request: function(type,hash) {
			var xhr, request, limit = 0;
			if(type === 's') {
				request = {
					"method": "gtoken",
					"pagelist": []
				};
				for ( var j in API.s ) {
					if(limit < 25) {
						request.pagelist.push([
							parseInt(j,10),
							API.s[j][0],
							parseInt(API.s[j][1],10)
						]);
						limit++;
					} else {
						API.queue.add('so',j,API.s[j][0],API.s[j][1]);
					}
				}
			} else
			if(type === 'g') {
				request = {
					"method": "gdata",
					"gidlist": []
				};
				for ( var k in API.g ) {
					if(limit < 25) {
						request.gidlist.push([
							parseInt(k,10),
							API.g[k]
						]);
						limit++;
					} else {
						API.queue.add('go',k,API.g[k]);
					}
				}
			}
			if(request) {
				if(!API.working && Date.now() > API.cooldown) {
					API.working = true;
					API.cooldown = Date.now();
					Debug.timer.start('apirequest');
					Debug.log(['API Request',request]);
					xhr = new XMLHttpRequest();
					xhr.open('POST', 'http://g.e-hentai.org/api.php');
					xhr.setRequestHeader('Content-Type', 'application/json');
					xhr.onreadystatechange = function() {
						if(xhr.readyState === 4 && xhr.status === 200)
						{
							if(JSON.parse(xhr.responseText)) {
								Debug.log(['API Response, Time: '+Debug.timer.stop('apirequest'),JSON.parse(xhr.responseText)]);
								API.response(type,JSON.parse(xhr.responseText));
							} else {
								Debug.log('API Request error. Waiting five seconds before trying again. (Time: '+Debug.timer.stop('apirequest')+')');
								Debug.log(xhr.responseText);
								/*API.cooldown = Date.now() + (5 * t.SECOND);*/
								API.timer(Main.update, 5000);
							}
						}
					};
					xhr.send(JSON.stringify(request));
				}
			}
		},
		response: function(type,json) {
			var arr;
			if(type === 's') {
				arr = json.tokenlist;
				for ( var i = 0, ii = arr.length; i < ii; i++ )
				{
					API.queue.add('g',arr[i].gid,arr[i].token);
				}
				API.queue.clear('s');
				if(Object.keys(API.so).length) {
					API.s = API.so;
					API.queue.clear('so');
				}
				API.working = false;
			} else
			if(type === 'g') {
				arr = json.gmetadata;
				for ( var j = 0, jj = arr.length; j < jj; j++ )
				{
					Database.set(arr[j]);
					Main.queue.add(arr[j].gid);
				}
				API.queue.clear('g');
				if(Object.keys(API.go).length) {
					API.g = API.go;
					API.queue.clear('go');
				}
				API.working = false;
			}
			Main.update();
		},
		init: function() {
			$.extend(API.queue, {
				add: function(type,uid,token,page) {
					if(type === 's') {
						API.s[uid] = [token,page];
					} else
					if(type === 'so') {
						API.so[uid] = [token,page];
					} else
					if(type === 'g') {
						API.g[uid] = token;
					} else
					if(type === 'go') {
						API.go[uid] = token;
					}
				},
				clear: function(type) {
					API[type] = {};
				}
			});
		}
	};
	Cache = {
		init: function() {
			if(conf['Disable Local Storage Cache'] === true) {
				Cache.type = sessionStorage;
			} else {
				Cache.type = localStorage;
			}
		},
		get: function(uid,type) {
			var key, json;
			if(!type) {
				type = 'gallery';
			}
			key = Main.namespace+type+'-'+uid;
			json = Cache.type.getItem(key);
			if(json) {
				json = JSON.parse(json);
				if(Date.now() > json.added + json.TTL)
				{
					Cache.type.removeItem(key);
					return false;
				} else {
					return json.data;
				}
			} else {
				return false;
			}
		},
		set: function(data,type,hash,ttl) {
			var key, keyid, TTL, limit, date, value;
			if(!type) {
				type = 'gallery';
				keyid = data.gid;
				limit = Date.now() - (12 * t.HOUR);
				date = new Date(parseInt(data.posted,10)*1000);
				if(date > limit) {
					TTL = date - limit;
				} else {
					TTL = 12 * t.HOUR;
				}
			} else {
				keyid = hash;
				TTL = ttl;
			}
			key = Main.namespace+type+'-'+keyid;
			value = {
				"added": Date.now(),
				"TTL": TTL,
				"data": data
			};
			Cache.type.setItem(key,JSON.stringify(value));	
		},
		load: function() {
			var key, data;
			
			for ( var i = 0, ii = Cache.type.length; i < ii; i++ )
			{
				key = Cache.type.key(i);
				if( key.match(Main.namespace+'gallery') )
				{
					data = Cache.get(key.match(/[0-9]+/));
					if(data)
					{
						Database.set(data);
					}
				}
			}
		}
	};
	Database = {}; $.extend(Database, {
		check: function(uid) {
			var data;
			if(Database[uid]) {
				return Database[uid].token;
			} else {
				data = Cache.get(uid);
				if(data) {
					Database.set(data);
					return data.token;
				} else {
					return false;
				}
			}
		},
		get: function(uid/*,debug*/) {
			var data;
			/* Use this if you want to break database gets randomly for debugging */
			/*if(debug === true) {
				if(Math.random() > 0.8) {
					return false;
				}
			}*/
			if(Database[uid])
			{
				return Database[uid];
			} else {
				data = Cache.get(uid);
				if(data) {
					Database.set(data);
					return data;
				} else {
					return false;
				}
			}
		},
		set: function(data) {
			var uid = data.gid;
			Database[uid] = data;
			Cache.set(data);
		},
		usage: function(uid) {
			if(!Database.usage.data[uid]) {
				Database.usage.data[uid] = 0;
			}
			return Database.usage.data[uid]++;
		},
		init: function() {
			$.extend(Database.usage, {
				data: {}
			});
			if(conf['Populate Database on Load'] === true) {
				Cache.load();
			}
		}
	});
	Hash = {
		md5: {},
		sha1: {},
		get: function(hash,type) {
			var result;
			if(Hash[type][hash]) {
				return Hash[type][hash];
			} else {
				result = Cache.get(hash,type);
				if(result) {
					Hash[type][hash] = result;
					return result;
				} else {
					return false;
				}
			}
		},
		set: function(data,type,hash) {
			var ttl;
			if(type === 'md5') {
				ttl = 365 * t.DAY;
			} else {
				ttl = 12 * t.HOUR;
			}
			Cache.set(data,type,hash,ttl);
		}
	};
	SHA1 = {
		/*
			SHA-1 JS implementation originally created by Chris Verness
			http://www.movable-type.co.uk/scripts/sha1.html
		*/
		data: function(image) {
			var string = '';
			for ( var i = 0, ii = image.length; i < ii; i++ ) {
					string += String.fromCharCode(image[i].charCodeAt(0) & 0xff);
			}
			return string;
		},
		f: function(s, x, y, z) {
			switch (s)
			{
				case 0: return (x & y) ^ (~x & z);
				case 1: return x ^ y ^ z;
				case 2: return (x & y) ^ (x & z) ^ (y & z);
				case 3: return x ^ y ^ z;
			}
		},
		ROTL: function(x, n) {
			return (x << n) | (x >>> (32-n));
		},
		hex: function(str) {
			var s = '', v;
			for ( var i = 7; i >= 0; i-- ) {
				v = (str >>> (i*4)) & 0xf;
				s += v.toString(16);
			}
			return s;
		},
		hash: function(image) {
			var H0, H1, H2, H3, H4, K, M, N, W, T,
				a, b, c, d, e, s, l, msg;
				
			K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];
			msg = SHA1.data(image) + String.fromCharCode(0x80);
			
			l = msg.length / 4 + 2;
			N = Math.ceil(l / 16);
			M = [];
			
			for ( var i = 0; i < N; i++ ) {
				M[i] = [];
				for ( var j = 0; j < 16; j++ ) {
					M[i][j] = (msg.charCodeAt(i*64+j*4) << 24) | (msg.charCodeAt(i*64+j*4+1) << 16) |
							(msg.charCodeAt(i*64+j*4+2) << 8)  | (msg.charCodeAt(i*64+j*4+3));
				}
			}
			
			M[N-1][14] = ((msg.length-1)*8) / Math.pow(2, 32); M[N-1][14] = Math.floor(M[N-1][14]);
			M[N-1][15] = ((msg.length-1)*8) & 0xffffffff;
			
			H0 = 0x67452301;
			H1 = 0xefcdab89;
			H2 = 0x98badcfe;
			H3 = 0x10325476;
			H4 = 0xc3d2e1f0;
			
			W = [];
			
			for ( var k = 0; k < N; k++ )
			{
				for ( var m = 0;  m < 16; m++ ) {
					W[m] = M[k][m];
				}	
				for ( var n = 16; n < 80; n++ ) {
					W[n] = SHA1.ROTL(W[n-3] ^ W[n-8] ^ W[n-14] ^ W[n-16], 1);
				}
				
				a = H0;
				b = H1;
				c = H2;
				d = H3;
				e = H4;
				
				for ( var t = 0; t < 80; t++ )
				{
					s = Math.floor(t/20);
					T = (SHA1.ROTL(a,5) + SHA1.f(s,b,c,d) + e + K[s] + W[t]) & 0xffffffff;
					e = d;
					d = c;
					c = SHA1.ROTL(b, 30);
					b = a;
					a = T;
				}
				
				H0 = (H0+a) & 0xffffffff;
				H1 = (H1+b) & 0xffffffff;
				H2 = (H2+c) & 0xffffffff;
				H3 = (H3+d) & 0xffffffff;
				H4 = (H4+e) & 0xffffffff;
			}
			
			return SHA1.hex(H0) + SHA1.hex(H1) + SHA1.hex(H2) + SHA1.hex(H3) + SHA1.hex(H4);
		}
	};
	Sauce = {
		UI: {
			toggle: function(e) {
				e.preventDefault();
				var a = e.target, results, style, sha1, hover;
				results = $.id(a.id.replace('exsauce','exresults'));
				sha1 = a.getAttribute('data-sha1');
				style = results.getAttribute('style');
				if(style.match('table')) {
					style = style.replace('table','none');
					if(conf['Show Short Results'] === true) {
						$.on(a,[
							['mouseover',Sauce.UI.show],
							['mousemove',Sauce.UI.move],
							['mouseout',Sauce.UI.hide]
						]);
					}
				} else
				if(style.match('none')) {
					style = style.replace('none','table');
					if(conf['Show Short Results'] === true) {
						$.off(a,[
							['mouseover',Sauce.UI.show],
							['mousemove',Sauce.UI.move],
							['mouseout',Sauce.UI.hide]
						]);
						hover = $.id('exhover-'+sha1);
						hover.setAttribute('style','display: none !important;');
					}
				}
				results.setAttribute('style',style);
			},
			show: function(e) {
				var a, sha1, hover;
				a = e.target;
				sha1 = a.getAttribute('data-sha1');
				hover = $.id('exhover-'+sha1);
				if(hover) {
					hover.setAttribute('style','display: table !important;');
				} else {
					Sauce.UI.hover(sha1);
				}
			},
			hide: function(e) {
				var a, sha1, hover;
				a = e.target;
				sha1 = a.getAttribute('data-sha1');
				hover = $.id('exhover-'+sha1);
				if(hover) {
					hover.setAttribute('style','display: none !important;');
				} else {
					Sauce.UI.hover(sha1);
				}
			},
			move: function(e) {
				var a, sha1, hover;
				a = e.target;
				sha1 = a.getAttribute('data-sha1');
				hover = $.id('exhover-'+sha1);
				if(hover) {
					hover.setAttribute('style','display: table !important;');
					hover.style.left = (e.clientX+12) + 'px';
					hover.style.top = (e.clientY+22) + 'px';
				} else {
					Sauce.UI.hover(sha1);
				}
			},
			hover: function(sha1) {
				var hover, result;
				hover = $.create('div',{
					className: 'exblock exhover post reply',
					id: 'exhover-'+sha1
				});
				result = Hash.get(sha1,'sha1');
				for ( var i = 0, ii = result.length; i < ii; i++ ) {
					hover.innerHTML += '<a class="exsauce-hover" href="'+result[i][0]+'">'+result[i][1]+'</a>';
					if(i < ii-1) {
						hover.innerHTML += '<br />';
					}
				}
				hover.setAttribute('style','display: table !important;');
				$.add(d.body,hover);
			}
		},
		format: function(a, result) {
			var count = result.length,
				results, parent, post;
			a.classList.add('sauced');
			a.textContent = Sauce.text('Found: '+count);
			if(count) {
				if(conf['Inline Results'] === true) {
					$.on(a,'click',Sauce.UI.toggle);
					results = $.create('div',{
						className: 'exblock exresults',
						id: a.id.replace('exsauce','exresults'),
						innerHTML: '<b>ExSauce Reverse Image Search Results</b> | View on: <a href="'+a.href+'">'+Sauce.label(true)+'</a><br />'
					});
					if(conf['Show Results by Default'] === true) {
						results.setAttribute('style', 'display: table !important;');
					} else {
						results.setAttribute('style', 'display: none !important;');
					}
					for ( var i = 0, ii = result.length; i < ii; i++ ) {
						results.appendChild($.tnode(result[i][0]));
						if(i < ii-1) {
							results.appendChild($.create('br'));
						}
					}
					if(Config.mode === '4chan') {
						parent = a.parentNode.parentNode.parentNode;
						post = $(Parser.postbody, parent);
						$.before(post,results);
					}
					Main.process([results]);
				}
				if(conf['Show Results by Default'] === false) {
					if(conf['Show Short Results'] === true) {
						$.on(a,[
							['mouseover',Sauce.UI.show],
							['mousemove',Sauce.UI.move],
							['mouseout',Sauce.UI.hide]
						]);
					}
				}
			}
			Debug.log('Formatting complete.');
		},
		lookup: function(a, sha1) {
			var response, links, link, result = [], count;
			a.textContent = Sauce.text('Checking');
			
			GM_xmlhttpRequest({
				method: "GET",
				url: a.href,
				onload: function(x) {
					response = $.frag(x.responseText);
					links = $$('div.it3 > a:not([rel="nofollow"]), div.itd2 > a:not([rel="nofollow"])',response);
					count = links.length;
					for ( var i = 0; i < count; i++ ) {
							link = links[i];
							result.push([link.href,link.innerHTML]);
					}
					Hash.set(result,'sha1',sha1);
					Debug.log('Lookup successful. Formatting.');
					if(conf['Show Short Results']) {
						Sauce.UI.hover(sha1);
					}
					Sauce.format(a, result);
				}
			});
		},
		hash: function(a, md5) {
			var image, sha1;
			image = a.href;
			Debug.log('Fetching image ' + image);
			a.textContent = Sauce.text('Loading');
			GM_xmlhttpRequest(
			{
				method: "GET",
				url: image,
				overrideMimeType: "text/plain; charset=x-user-defined",
				headers: { "Content-Type": "image/jpeg" },
				onload: function(x) { 
					a.textContent = Sauce.text('Hashing');
					sha1 = SHA1.hash(x.responseText);
					a.setAttribute('data-sha1',sha1);
					Hash.set(sha1,'md5',md5);
					Debug.log('SHA-1 hash for image: ' + sha1);
					Sauce.check(a);
				}
			});
		},
		check: function(a) {
			var md5, sha1, result;
			if(a.hasAttribute('data-sha1')) {
				sha1 = a.getAttribute('data-sha1');
			} else {
				md5 = a.getAttribute('data-md5');
				sha1 = Hash.get(md5,'md5');
			}
			if(sha1) {
				Debug.log('SHA-1 hash found.');
				a.setAttribute('data-sha1',sha1);
				a.href = 'http://'+conf['Site to Use'].value+'/?f_shash='+sha1+'&fs_similar=0';
				if(conf['Search Expunged'] === true) {
					a.href += '&fs_exp=1';
				}
				a.setAttribute('target','_blank');
				result = Hash.get(sha1,'sha1');
				if(result) {
					Debug.log('Cached result found. Formatting.');
					Sauce.format(a, result);
				} else {
					Debug.log('No cached result found. Performing a lookup.');
					Sauce.lookup(a, sha1);
				}
			} else {
				Debug.log('No SHA-1 hash found. Fetching image.');
				Sauce.hash(a, md5);
			}
		},
		click: function(e) {
			e.preventDefault();
			var a = e.target;
			$.off(a,'click',Sauce.click);
			Sauce.check(a);
		},
		label: function(siteonly) {
			var site, label = 'ExSauce';
			site = conf['Site to Use'];
			if(site.value === 'exhentai.org') {
				label = 'ExHentai';
			} else {
				label = 'E-Hentai';
			}
			if(!siteonly) {
				if(conf['Use Custom Label'] === true) {
					label = conf['Custom Label Text'];
				}
			}
			if(Config.mode === '4chan') {
				if(conf['Lowercase on 4chan'] === true) {
					label = label.toLowerCase();
				}
			}
			return label;
		},
		text: function(text) {
			if(Config.mode === '4chan') {
				if(conf['Lowercase on 4chan'] === true) {
					return text.toLowerCase();
				} else {
					return text;
				}
			}
		}
	};
	Parser = {
		postbody: 'blockquote',
		prelinks: 'a:not(.quotelink)',
		links: '.exlink',
		image: '.file',
		unformatted: function(uid) {
			var result = [], links = $$('a.uid-'+uid);
			for ( var i = 0, ii = links.length; i < ii; i++ )
			{
				if(links[i].classList.contains('exprocessed')) {
					result.push(links[i]);
				}
			}
			return result;
		},
		linkify: function(post) {
			var nodes, node, text, match, ws = /^\s*$/,
				linknode, sp, ml, tn, tl, tu;
			nodes = $.textnodes(post);
			if(nodes) {
				for ( var i = 0, ii = nodes.length; i < ii; i++ )
				{
					node = nodes[i];
					text = node.textContent;
					match = text.match(regex.url);
					tl = null;
					linknode = (match) ? [] : null;
					while( match )
					{
						sp = text.search(regex.url);
						ml = match[0].length-1;
						tn = $.tnode(text.substr(0,sp));
						tl = text.substr(sp+ml+1,text.length);
						tu = $.create('a');
						tu.className = 'exlink exgallery exunprocessed';
						if(!match[0].match('http://')) {
							tu.href = 'http://'+match[0];
							tu.innerHTML = 'http://'+match[0];
						} else {
							tu.href = match[0];
							tu.innerHTML = match[0];
						}
						tu.setAttribute('target','_blank');
						tu.style.textDecoration = 'none';
						if(tn.length > 0) {
							if(!ws.test(tn.nodeValue)) {
								linknode.push(tn);
							}
						}
						linknode.push(tu);
						text = tl;
						match = text.match(regex.url);
					}
					if(tl) {
						if(tl.length) {
							linknode.push($.tnode(tl));
						}
					}
					if(linknode) {
						$.replace(node, $.elem(linknode));
					}
				}
			}
		}
	};
	Options = {
		save: function(e) {
			e.preventDefault();
			Config.save();
			$.remove($.id('exlinks-overlay'));	
			d.body.style.overflow = 'visible';
		},
		close: function(e) {
			e.preventDefault();
			tempconf = JSON.parse(JSON.stringify(pageconf));
			$.remove($.id('exlinks-overlay'));	
			d.body.style.overflow = 'visible';
		},
		toggle: function(e) {
			var option, type, domain, value;
			domain = {
				"1": fetch.original,
				"2": fetch.geHentai,
				"3": fetch.exHentai
			};
			option = e.target;
			type = option.getAttribute('type');
			if(type==='checkbox') {
				value = option.checked ? true : false;
				tempconf[option.name] = value;
			} else
			if(type==='domain' || type==='saucedomain') {
				tempconf[option.name] = domain[option.value];
			} else
			if(type==='text') {
				tempconf[option.name] = option.value;
			}
		},
		open: function() {
			var gen, overlay, over, frag;
			pageconf = JSON.parse(JSON.stringify(tempconf));
			overlay = $.frag(UI.html.options());
			over = overlay.firstChild;
			frag = d.createDocumentFragment();
			frag.appendChild(overlay);
			$.add(d.body,frag);
			$.on($.id('exlinks-options-save'),'click',Options.save);
			$.on($.id('exlinks-options-cancel'),'click',Options.close);
			$.on(over,'click',Options.close);
			$.on($.id('exlinks-options'),'click',function(e){e.stopPropagation();});
			d.body.style.overflow = 'hidden';
			gen = function(target,obj)
			{
				var desc, tr, type, value, sel;
				for ( var i in obj ) {
					desc = obj[i][2];
					type = obj[i][0];
					value = tempconf[i];
					tr = $.create('tr');
					if(type === 'checkbox') {
						if(value) {
							sel = ' checked';
						} else {
							sel = '';
						}
						tr.innerHTML = [
							'<td style="padding:3px;">',
							'<input style="float:right;margin-right:2px;" type="checkbox" id="'+i+'" name="'+i+'"'+sel+' />',
							'<label for="'+i+'"><b>'+i+':</b> '+desc+'</label>',
							'</td>'
						].join('');
						$.on($('input',tr),'change',Options.toggle);
					} else
					if(type === 'domain') {
						tr.innerHTML = [
						'<td style="padding:3px;">',
						'<select name="'+i+'" type="domain" style="font-size:0.92em!important;float:right;width:18%;">',
							'<option value="1"'+(value.value==='Original'?' selected':'')+'>Original</option>',
							'<option value="2"'+(value.value==='g.e-hentai.org'?' selected':'')+'>g.e-hentai.org</option>',
							'<option value="3"'+(value.value==='exhentai.org'?' selected':'')+'>exhentai.org</option></select>',
						'<b>'+i+':</b> '+desc+'</td>'
						].join('');
						$.on($('select',tr),'change',Options.toggle);
					}
					if(type === 'saucedomain') {
						tr.innerHTML = [
						'<td style="padding:3px;">',
						'<select name="'+i+'" type="domain" style="font-size:0.92em!important;float:right;width:18%;">',
							'<option value="2"'+(value.value==='g.e-hentai.org'?' selected':'')+'>g.e-hentai.org</option>',
							'<option value="3"'+(value.value==='exhentai.org'?' selected':'')+'>exhentai.org</option></select>',
						'<b>'+i+':</b> '+desc+'</td>'
						].join('');
						$.on($('select',tr),'change',Options.toggle);
					}
					if(type === 'textbox') {
						tr.innerHTML = [
						'<td style="padding:3px;">',
						'<input style="float:right;padding-left:5px;width:18%;font-size:0.92em!important;" type="text" id="'+i+'" name="'+i+'" value="'+value+'" />',
						'<b>'+i+':</b> '+desc+'</td>'
						].join('');
						$.on($('input',tr),'input',Options.toggle);
					}
					$.add(target,tr);
				}
			};
			gen($.id('exlinks-options-general'),options.general);
			gen($.id('exlinks-options-actions'),options.actions);
			gen($.id('exlinks-options-sauce'),options.sauce);
			gen($.id('exlinks-options-domains'),options.domains);
			gen($.id('exlinks-options-debug'),options.debug);
		},
		init: function() {
		var oneechan = $.id('OneeChanLink'),
			chanss = $.id('themeoptionsLink'),
			conflink, conflink2, arrtop, arrbot;
			conflink = $.create('a', { title: 'ExLinks Options', className: 'exlinksOptionsLink' });
			$.on(conflink,'click',Options.open);
			if(Config.mode === '4chan')
			{
				if(oneechan) {
					conflink.setAttribute('style','position: fixed; background: url('+img.options+'); top: 108px; right: 10px; left: auto; width: 15px; height: 15px; opacity: 0.75; z-index: 5;');
					$.on(conflink,[
						['mouseover',function(e){e.target.style.opacity = 1.0;}],
						['mouseout',function(e){e.target.style.opacity = 0.65;}]
					]);
					$.add(d.body,conflink);
				} else
				if(chanss) {
					conflink.innerHTML = 'Ex';
					conflink.setAttribute('style','background-image: url('+img.options+'); padding-top: 15px !important; opacity: 0.75;');
					$.on(conflink,[
						['mouseover',function(e){e.target.style.opacity = 1.0;}],
						['mouseout',function(e){e.target.style.opacity = 0.65;}]
					]);
					$.add($.id('navtopright'),conflink);
				} else {
					conflink.innerHTML = 'ExLinks Options';
					conflink.setAttribute('style','cursor: pointer');
					conflink2 = conflink.cloneNode(true);
					$.on(conflink2,'click',Options.open);
					arrtop = [$.tnode('['),conflink,$.tnode('] ')];
					arrbot = [$.tnode('['),conflink2,$.tnode('] ')];
					$.prepend($.id('navtopright'),$.elem(arrtop));
					$.prepend($.id('navbotright'),$.elem(arrbot));
				}
			} else
			if(Config.mode === 'foolz-fuuka')
			{
				conflink.innerHTML = 'exlinks options';
				conflink.setAttribute('style','cursor: pointer; text-decoration: underline;');
				arrtop = [$.tnode(' [ '),conflink,$.tnode(' ] ')];
				$.add($('div'),$.elem(arrtop));
			} else
			if(Config.mode === 'foolz-default')
			{
				conflink.innerHTML = 'ExLinks Options';
				conflink.setAttribute('style','cursor: pointer;');
				arrtop = [$.tnode(' [ '),conflink,$.tnode(' ] ')];
				$.add($('.letters'),$.elem(arrtop));
			}
		}
	};
	Config = {
		mode: '4chan',
		link: function(url,opt) {
			var site;
			if(opt.value === "Original")
			{
				if(url.match('exhentai.org'))
				{
					site = 'exhentai.org';
				}
				else if(url.match('g.e-hentai.org'))
				{
					site = 'g.e-hentai.org';
				} else {
					site = false;
				}
			}
			else if(opt.value === "exhentai.org")
			{
				site = 'exhentai.org';
			}
			else if(opt.value === "g.e-hentai.org")
			{
				site = 'g.e-hentai.org';
			} else {
				site = 'exhentai.org';
			}
			return site;
		},
		site: function() {
			var curSite, curDocType, curType;
			curSite = document.URL;
			curDocType = document.doctype;
			curType = [
				"<!DOCTYPE ",
				curDocType.name,
				(curDocType.publicId ? ' PUBLIC "' + curDocType.publicId + '"' : ''),
				(!curDocType.publicId && curDocType.systemId ? ' SYSTEM' : ''), 
				(curDocType.systemId ? ' "' + curDocType.systemId + '"' : ''),
			'>'].join('');
			if(curSite.match('archive.foolz.us'))
			{
				if(curType.match('<!DOCTYPE html>'))
				{
					Config.mode = 'foolz-default';
					Parser.postbody = '.text';
					Parser.prelinks = 'a:not(.backlink)';
					Parser.image = '.thread_image_box';
				} else {
					Config.mode = 'foolz-fuuka';
					Parser.image = '.thumb';
				}
			}
		},
		save: function() {
			for ( var i in options ) {
				for ( var k in options[i] ) {
					localStorage.setItem(Main.namespace+'user-'+k,JSON.stringify(tempconf[k]));
				}
			}
		},
		init: function() {
			var temp, option;
			for ( var i in options ) {
				for ( var k in options[i] ) {
					temp = localStorage.getItem(Main.namespace+'user-'+k);
					if(temp) {
						temp = JSON.parse(temp);
						conf[k] = temp;
					} else {
						option = JSON.stringify(options[i][k][1]);
						conf[k] = JSON.parse(option);
						localStorage.setItem(Main.namespace+'user-'+k,option);		
					}
				}
			}
			if(navigator.userAgent.match('Presto')) {
				conf.ExSauce = false;
			}
			tempconf = JSON.parse(JSON.stringify(conf));
		}
	};
	Main = {
		namespace: 'exlinks-',
		version: '2.1.1',
		check: function(uid) {
			var check, links, link, type, token, page;
			check = Database.check(uid);
			if(!check) {
				links = Parser.unformatted(uid);
				for ( var i = 0, ii = links.length; i < ii; i++ )
				{
					link = links[i];
					type = link.className.match(regex.type)[1];
					if(type === 's') {
						page = link.className.match(regex.page);
					} else
					if(type === 'g') {
						token = link.className.match(regex.token);
						break;
					}
				}
				if(type === 's') {
					API.queue.add('s',uid,page[1],page[2]);
					return [uid,type];
				} else
				if(type === 'g') {
					API.queue.add('g',uid,token[1]);
					return [uid,type];
				}
			} else {
				Main.queue.add(uid);
				return [uid,'f'];
			}
		},
		format: function(queue) {
			Debug.timer.start('format');
			Debug.value.set('failed',0);
			
			var uid, links, link, button, data, actions, failed = {}, failure, failtype=[];
			for ( var i = 0, ii = queue.length; i < ii; i++ )
			{
				uid = queue[i];
				data = Database.get(uid);
				links = Parser.unformatted(uid);
				if(data) {
					Debug.value.add('formatlinks');
					for ( var k = 0, kk = links.length; k < kk; k++ )
					{
						link = links[k];
						button = $.id(link.id.replace('gallery','button'));
						link.innerHTML = data.title;
						$.off(button,'click',Main.singlelink);
						if(conf['Gallery Details'] === true) {
							$.on(link,[
								['mouseover',UI.show],
								['mouseout',UI.hide],
								['mousemove',UI.move]
							]);
						}
						if(conf['Gallery Actions'] === true) {
							$.on(button,'click',UI.toggle);
						}
						actions = UI.actions(data,link);
						$.after(link,actions);
						actions = $.id(link.id.replace('exlink-gallery','exblock-actions'));
						if(conf['Torrent Popup'] === true) {
							$.on($('a.extorrent',actions),'click',UI.popup);
						}
						if(conf['Archiver Popup'] === true) {
							$.on($('a.exarchiver',actions),'click',UI.popup);
						}
						if(conf['Favorite Popup'] === true) {
							$.on($('a.exfavorite',actions),'click',UI.popup);
						}
						/*
						if(conf.Filter) {
							// Filter.process(actions);
						}*/
						link.classList.remove('exprocessed');
						link.classList.add('exformatted');
						button.classList.remove('exfetch');
						button.classList.add('extoggle');
					}
				} else {
					Debug.value.add('failed');
					failed[uid] = true;
				}
			}
			Main.queue.clear();
			Debug.log('Formatted IDs: '+Debug.value.get('formatlinks')+' OK, '+Debug.value.get('failed')+' FAIL. Time: '+Debug.timer.stop('format'));
			if(Object.keys(failed).length) {
				for ( var j in failed ) {
					failure = Main.check(parseInt(j,10));
					failtype.push(failure[0]);
					failtype.push(failure[1]);
				}
				Debug.log([failtype]);
				Main.update();
			}
		},
		queue: function() {
			var arr = [], i = 0,
				obj = Main.queue.list;
			for ( var k in obj ) {
				arr[i++] = parseInt(k,10);
			}
			return arr;
		},
		update: function() {
			var queue = Main.queue();
			if(!API.working) {
				if(API.queue('s')) {
					API.request('s');
				} else
				if(API.queue('g')) {
					API.request('g');
				}
			}
			if(queue.length) {
				Main.format(queue);
				Main.queue.clear();
			}
		},
		singlelink: function(e) {
			e.preventDefault();
			var link;
			link = $.id(e.target.id.replace('button','gallery'));
			Main.single(link);
			Main.update();
			
		},
		single: function(link) {
			var type, uid, token, page, check;
			type = link.className.match(regex.type)[1];
			uid = link.className.match(regex.uid)[1];
			token = link.className.match(regex.token);
			page = link.className.match(regex.page);
			if(type === 's')
			{
				check = Database.check(uid);
				if(check) {
					type = 'g';
					token = check;
					link.classList.remove('type-s');
					link.classList.remove('page-'+page[1]+'-'+page[2]);
					link.classList.add('type-g');
					link.classList.add('token-'+token);
					Main.queue.add(uid);
				} else {
					API.queue.add('s',uid,page[1],page[2]);
				}
			}
			if(type === 'g')
			{
				check = Database.check(uid);
				if(check) {
					Main.queue.add(uid);
				} else {
					API.queue.add('g',uid,token[1]);
				}
			}
		},
		process: function(posts) {
			var post, file, info, sauce, exsauce, md5, sha1, results, hover, saucestyle,
				actions, style, prelinks, prelink, links, link, site,
				type, gid, sid, uid, button, usage;
			
			Debug.timer.start('process');
			Debug.value.set('post_total',posts.length);
			
			for ( var i = 0, ii = posts.length; i < ii; i++ )
			{
				post = posts[i];
				if(conf.ExSauce === true) {
					// Needs redoing to make life easier with archive
					if(!post.classList.contains('exresults')) {
						if($(Parser.image, post.parentNode)) {
							if(Config.mode === '4chan') {
								file = $(Parser.image, post.parentNode);
								if(file.childNodes.length > 1) {
									info = file.childNodes[0];
									md5 = file.childNodes[1].firstChild.getAttribute('data-md5');
									md5 = md5.replace('==','');
									sauce = $('.exsauce',info);
									if(!sauce) {
										exsauce = $.create('a', {
											textContent: Sauce.label(),
											className: 'exsauce',
											id: 'exsauce-'+post.id,
											href: file.childNodes[1].href
										});
										if(conf['No Underline on Sauce']) {
											exsauce.classList.add('exsauce-no-underline');
										}
										exsauce.setAttribute('data-md5',md5);
										$.on(exsauce,'click',Sauce.click);
										$.add(info,$.tnode(" "));
										$.add(info,exsauce);
									} else {
										if(!sauce.classList.contains('sauced')) {
											$.on(sauce,'click',Sauce.click);
										} else {
											sha1 = sauce.getAttribute('data-sha1');
											if(conf['Show Short Results'] === true) {
												if(conf['Inline Results'] === true) {
													results = $.id(sauce.id.replace('exsauce','exresults'));
													saucestyle = results.getAttribute('style');
													if(saucestyle.match('none')) {
														$.on(sauce,[
															['mouseover',Sauce.UI.show],
															['mousemove',Sauce.UI.move],
															['mouseout',Sauce.UI.hide]
														]);
													}
												} else {
													$.on(sauce,[
														['mouseover',Sauce.UI.show],
														['mousemove',Sauce.UI.move],
														['mouseout',Sauce.UI.hide]
													]);
												}
											}
											if(conf['Inline Results'] === true) {
												$.on(sauce,'click',Sauce.UI.toggle);
												if(conf['Hide Results in Quotes'] === true) {
													results = $.id(sauce.id.replace('exsauce','exresults'));
													results.setAttribute('style','display: none !important;');
												}
											}
										}
									}
								}
							} else
							if(Config.mode === 'foolz-fuuka') {
								// A WORLD OF PAIN
							} else
							if(Config.mode === 'foolz-default') {
								// AWAITS
							}
						}
					}
				}
				if(post.innerHTML.match(regex.url))
				{
					Debug.value.add('posts');
					
					if(conf['Hide in Quotes']) {
						actions = $$('.exactions',post);
						for ( var h = 0, hh = actions.length; h < hh; h++ )
						{
							style = actions[h].getAttribute('style');
							if(style.match('inline-block')) {
								style = style.replace('inline-block','none');
							}
							actions[h].setAttribute('style',style);
						}
					}
					if(!post.classList.contains('exlinkified'))
					{
						Debug.value.add('linkified');
						
						prelinks = $$(Parser.prelinks,post);
						if(prelinks) {
							for ( var k = 0, kk = prelinks.length; k < kk; k++ )
							{
								prelink = prelinks[k];
								if(prelink.href.match(regex.url)) {
									prelink.classList.add('exlink');
									prelink.classList.add('exgallery');
									prelink.classList.add('exunprocessed');
									prelink.style.textDecoration = 'none';
									prelink.setAttribute('target','_blank');
								}
							}
						}
						Parser.linkify(post);
						post.classList.add('exlinkified');
					}
					links = $$('a.exlink',post);
					for ( var j = 0, jj = links.length; j < jj; j++ )
					{
						link = links[j];
						if(link.classList.contains('exbutton')) {
							if(link.classList.contains('extoggle')) {
								if(conf['Gallery Actions'] === true) {
									$.on(link,'click',UI.toggle);
								}
							}
							if(link.classList.contains('exfetch')) {
								$.on(link,'click',Main.singlelink);
							}
						}
						if(link.classList.contains('exaction')) {
							if(link.classList.contains('extorrent')) {
								if(conf['Torrent Popup'] === true) {
									$.on(link,'click',UI.popup);
								}
							}
							if(link.classList.contains('exarchiver')) {
								if(conf['Archiver Popup'] === true) {
									$.on(link,'click',UI.popup);
								}
							}
							if(link.classList.contains('extorrent')) {
								if(conf['Favorite Popup'] === true) {
									$.on(link,'click',UI.popup);
								}
							}
						}
						if(link.classList.contains('exgallery')) {
							if(link.classList.contains('exunprocessed')) {
								site = conf['Gallery Link'];
								if(site.value !== "Original") {
									if(!link.href.match(site.value)) {
										link.href = link.href.replace(regex.site,site.value);
									}
								}
								type = link.href.match(regex.type);
								if(type) {
									type = type[1];
								}
								if(type === 's') {
									sid = link.href.match(regex.sid);
									if(sid) {
										link.classList.add('type-s');
										link.classList.add('uid-'+sid[2]);
										link.classList.add('page-'+sid[1]+'-'+sid[3]);
										uid = sid[2];
									} else {
										type = null;
									}
								} else
								if(type === 'g') {
									gid = link.href.match(regex.gid);
									if(gid) {
										link.classList.add('type-g');
										link.classList.add('uid-'+gid[1]);
										link.classList.add('token-'+gid[2]);
										uid = gid[1];
									} else {
										type = null;
									}
								}
								link.classList.remove('exunprocessed');
								if(type) {
									link.classList.add('exprocessed');
									usage = Database.usage(uid);
									link.id = 'exlink-gallery-uid-'+uid+'-'+usage;
									button = UI.button(link.href,link.id);
									$.on(button,'click',Main.singlelink);
									$.before(link,button);
								} else {
									link.classList.remove('exgallery');
								}
							}
							if(link.classList.contains('exprocessed')) {
								if(conf['Automatic Processing'] === true) {
									Main.single(link);
									
									Debug.value.add('processed');
								}
							}
							if(link.classList.contains('exformatted')) {
								if(conf['Gallery Details'] === true) {
									$.on(link,[
										['mouseover',UI.show],
										['mouseout',UI.hide],
										['mousemove',UI.move]
									]);
								}
							}
						}
						if(link.classList.contains('exfavorite')) {
							if(conf['Favorite Autosave']) {
								$.on(link,'click',UI.favorite);
							}
						}
					}
				}	
				
			}
			Debug.log('Total posts: '+Debug.value.get('post_total')+' Linkified: '+Debug.value.get('linkified')+' Processed: '+Debug.value.get('posts')+' Links: '+Debug.value.get('processed')+' Time: '+Debug.timer.stop('process'));
			Main.update();
		},
		dom: function(e) {
			var node = e.target, nodelist = [];
			if(node.nodeName === 'DIV') {
				if(node.classList.contains('postContainer')) {
					nodelist.push($(Parser.postbody,node));
				} else
				if(node.classList.contains('inline')) {
					nodelist.push($(Parser.postbody,node));
				}
			} else
			if(node.nodeName === 'ARTICLE') {
				if(node.classList.contains('post')) {
					nodelist.push($(Parser.postbody,node));
				}
			}
			if(nodelist.length) {
				Main.process(nodelist);
			}
		},
		observer: function(m) {
			var nodes, node, nodelist = [];
			m.forEach(function(e) {
				if(e.addedNodes) {
					nodes = e.addedNodes;
					for ( var i = 0, ii = nodes.length; i < ii; i++ )
					{
						node = nodes[i];
						if(node.nodeName === 'DIV') {
							if(node.classList.contains('postContainer')) {
								nodelist.push($(Parser.postbody,node));
							} else
							if(node.classList.contains('inline')) {
								nodelist.push($(Parser.postbody,node));
							}
						} else
						if(node.nodeName === 'ARTICLE') {
							if(node.classList.contains('post')) {
								nodelist.push($(Parser.postbody,node));
							}
						}
					}
				}
			});
			if(nodelist.length) {
				Main.process(nodelist);
			}
		},
		ready: function() {
			var css, style;
			Debug.timer.start('init');
			Config.site();
			Options.init();
			css = 'data:text/css;base64,LmV4YWN0aW9ucywgLmV4cmVzdWx0cyB7IG1heC13aWR0aDogMTAwJTsgd2lkdGg6IGF1dG87IHBhZGRpbmc6IDRweDsgbWFyZ2luOiAzcHggMDsgYm9yZGVyLXJhZGl1czogNHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuMDUpICFpbXBvcnRhbnQ7IH0gLmV4cmVzdWx0cyB7IHBhZGRpbmc6IDZweDsgfSAuZXhhY3Rpb25zLXRhYmxlIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogMTAwJTsgfSAuZXhzYXVjZS1uby11bmRlcmxpbmUsIC5leHNhdWNlLWhvdmVyIHsgdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7IH0gLmV4YWN0aW9uIHsgdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7IHZlcnRpY2FsLWFsaWduOiB0b3A7IG1hcmdpbjogMCA0cHg7IH0gLmV4dGFnIHsgZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7IHRleHQtZGVjb3JhdGlvbjogbm9uZSAhaW1wb3J0YW50OyBtYXJnaW46IDBweCAycHggIWltcG9ydGFudDsgfSAuZXhkZXRhaWxzIHsgZm9udC1zaXplOiAxM3B4ICFpbXBvcnRhbnQ7IG9wYWNpdHk6IDAuOTM7IHBvc2l0aW9uOiBmaXhlZCAhaW1wb3J0YW50OyB6LWluZGV4OiA5OTkgIWltcG9ydGFudDsgcGFkZGluZzogOHB4ICFpbXBvcnRhbnQ7IGJvcmRlci1yYWRpdXM6IDhweCAhaW1wb3J0YW50OyB0ZXh0LWFsaWduOiBjZW50ZXIgIWltcG9ydGFudDsgd2lkdGg6IDYwJSAhaW1wb3J0YW50OyB9IC5leGhvdmVyIHsgb3BhY2l0eTogMC45MzsgcG9zaXRpb246IGZpeGVkICFpbXBvcnRhbnQ7IHotaW5kZXg6IDk5OCAhaW1wb3J0YW50OyBwYWRkaW5nOiA4cHggIWltcG9ydGFudDsgYm9yZGVyLXJhZGl1czogNHB4ICFpbXBvcnRhbnQ7IHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IH0gLmV4c2lkZXBhbmVsIHsgZmxvYXQ6IHJpZ2h0OyBtYXJnaW4tbGVmdDogOHB4OyBmb250LXNpemU6IDE0cHggIWltcG9ydGFudDsgbGluZS1oZWlnaHQ6IDEuMGVtICFpbXBvcnRhbnQ7IH0gLmV4Y2F0ZWdvcnkgeyBib3gtc2hhZG93OiAwLjBlbSAwLjBlbSAwLjVlbSByZ2JhKDMyLDMyLDMyLDAuMik7IGJvcmRlci1yYWRpdXM6IDRweDsgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDsgaGVpZ2h0OiAyNHB4OyBtYXJnaW4tYm90dG9tOiA5cHg7IH0gLmV4c2lkZWJhcmJveCB7IHdpZHRoOiA2NHB4OyBmb250LXNpemU6IDAuOGVtOyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuMik7IGJvcmRlci1yYWRpdXM6IDRweDsgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDsgYm94LXNoYWRvdzogMC4wZW0gMC4wZW0gMC41ZW0gcmdiYSgwLDAsMCwwLjIpOyBtYXJnaW4tYm90dG9tOiA5cHg7IHBhZGRpbmc6IDRweCAwOyB9IC5leHRpdGxlIHsgZm9udC1zaXplOiAxLjVlbSAhaW1wb3J0YW50OyBmb250LXdlaWdodDogYm9sZCAhaW1wb3J0YW50OyB0ZXh0LXNoYWRvdzogMC4xZW0gMC4xZW0gMC40ZW0gcmdiYSgwLDAsMCwwLjE1KSAhaW1wb3J0YW50OyB0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsgfSAuZXhqcHRpdGxlIHsgb3BhY2l0eTogMC41OyBmb250LXNpemU6IDEuMWVtOyB0ZXh0LXNoYWRvdzogMC4xZW0gMC4xZW0gMC41ZW0gcmdiYSgwLDAsMCwwLjIpICFpbXBvcnRhbnQ7IH0gLmV4ZGV0YWlscyAuZXh0YWcgeyBmb250LXNpemU6IDEuMDVlbSAhaW1wb3J0YW50OyB9IC5leHRodW1ibmFpbCB7IGZsb2F0OiBsZWZ0OyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoI3tkYXRhLnRodW1ifSk7IG1hcmdpbi1yaWdodDogOHB4OyB3aWR0aDogMTQwcHg7IGhlaWdodDogMjAwcHg7IGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7IGJhY2tncm91bmQtc2l6ZTogY292ZXI7IGJhY2tncm91bmQtcG9zaXRpb246IDI1JSAwJTsgfSAjZXhsaW5rcy1vdmVybGF5IHsgcG9zaXRpb246IGZpeGVkOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyB0b3A6IDA7IGxlZnQ6IDA7IHRleHQtYWxpZ246IGNlbnRlcjsgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjUpOyB6LWluZGV4OiAxMDAwOyB9ICNleGxpbmtzLW9wdGlvbnMgeyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyBmb250LWZhbWlseTogc2Fucy1zZXJpZjsgcG9zaXRpb246IGZpeGVkICFpbXBvcnRhbnQ7IHdpZHRoOiA2MCUgIWltcG9ydGFudDsgaGVpZ2h0OiA2MCUgIWltcG9ydGFudDsgdG9wOiAxNiUgIWltcG9ydGFudDsgbGVmdDogMjAlICFpbXBvcnRhbnQ7IHBhZGRpbmc6IDhweCAhaW1wb3J0YW50OyBwYWRkaW5nLXRvcDogMnB4ICFpbXBvcnRhbnQ7IGJvcmRlci1yYWRpdXM6IDZweCAhaW1wb3J0YW50OyB6LWluZGV4OiAxMDAxICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246IGxlZnQgIWltcG9ydGFudDsgcGFkZGluZy1ib3R0b206IDY0cHggIWltcG9ydGFudDsgfSAuZXhsaW5rcy1vcHRpb25zLWJ1dHRvbiB7IG1hcmdpbjogNHB4IDJweDsgZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7IHBhZGRpbmc6IDRweDsgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjA1KTsgYm9yZGVyLXJhZGl1czogM3B4OyB9IC5leGxpbmtzLW9wdGlvbnMtdGl0bGUgeyBmb250LXNpemU6IDIuMGVtICFpbXBvcnRhbnQ7IGZvbnQtd2VpZ2h0OiBib2xkICFpbXBvcnRhbnQ7IHRleHQtZGVjb3JhdGlvbjogbm9uZSAhaW1wb3J0YW50OyB9IC5leGxpbmtzLW9wdGlvbnMtdmVyc2lvbiB7IG1hcmdpbjogMCA0cHg7IG9wYWNpdHk6IDAuOTsgdmVydGljYWwtYWxpZ246IDc1JTsgdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7IH0gI2V4bGlua3Mtb3B0aW9ucy1jb250ZW50IHsgb3ZlcmZsb3cteTogc2Nyb2xsICFpbXBvcnRhbnQ7IHBhZGRpbmc6IDRweCAhaW1wb3J0YW50OyB0ZXh0LWFsaWduOiBsZWZ0OyBoZWlnaHQ6IDEwMCU7IG1hcmdpbi10b3A6IDE2cHggIWltcG9ydGFudDsgfSAuZXhsaW5rcy1vcHRpb25zLXN1YnRpdGxlIHsgZm9udC1zaXplOiAxLjVlbSAhaW1wb3J0YW50OyBmb250LXdlaWdodDogYm9sZDsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7IH0gLmV4bGlua3Mtb3B0aW9ucy1ub3RpY2UgeyBmbG9hdDogcmlnaHQ7IHBhZGRpbmctdG9wOiA3cHg7IG1hcmdpbi1yaWdodDogNHB4OyBvcGFjaXR5OiAwLjY7IH0gLmV4bGlua3Mtb3B0aW9ucy10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMik7IGJvcmRlci1yYWRpdXM6IDRweDsgbWFyZ2luOiA0cHggMDsgfSAuZXhsaW5rcy1vcHRpb25zLXRhYmxlIHRyOm50aC1jaGlsZChldmVuKSB7IGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC4wNSk7IH0gLmV4bGlua3Mtb3B0aW9ucy10YWJsZSB0cjpudGgtY2hpbGQob2RkKSB7IGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC4wMjUpOyB9';
			style = $.create('link', {
				rel: "stylesheet",
				type: "text/css",
				href: css
			});
			$.add(d.head,style);
			Debug.log('Initialization complete. Time: '+Debug.timer.stop('init'));
			var nodelist = $$(Parser.postbody),
				MutationObserver, updater,
				updater_config = { childList: true, subtree: true };
			Main.process(nodelist);
			MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
			if(MutationObserver) {
				updater = new MutationObserver(Main.observer);
				updater.observe(d.body, updater_config);
			} else {
				$.on(d.body,'DOMNodeInserted',Main.dom);
			}
			$.off(d,'DOMContentLoaded',Main.ready);
		},
		init: function() {
			Config.init();
			Debug.init();
			Cache.init();
			Database.init();
			API.init();
			UI.init();
			$.extend(Main.queue, {
				list: {},
				add: function(uid) {
					Main.queue.list[uid] = true;
				},
				clear: function() {
					Main.queue.list = {};
				}
			});
			$.on(d,'DOMContentLoaded',Main.ready);
		}
	};	
	
	Main.init();
	
}).call(this);